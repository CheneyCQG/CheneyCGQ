<!DOCTYPE html>
<html lang="zh-cn" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='RabbitMQ‰ªãÁªçÂíå‰ΩøÁî®'>
<title>RabbitMQ</title>

<link rel='canonical' href='https://cheneycqg.github.io/post/rabbitmq/'>

<link rel="stylesheet" href="/scss/style.min.83fdf04f357d6c514ee15e600463b045549e8b40c428f14454adecaa742b352f.css"><meta property='og:title' content='RabbitMQ'>
<meta property='og:description' content='RabbitMQ‰ªãÁªçÂíå‰ΩøÁî®'>
<meta property='og:url' content='https://cheneycqg.github.io/post/rabbitmq/'>
<meta property='og:site_name' content='Cheney Site'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='RabbitMQ' /><meta property='article:tag' content='‰∏≠Èó¥‰ª∂' /><meta property='article:published_time' content='2023-09-08T00:00:00&#43;00:00'/><meta property='article:modified_time' content='2023-09-08T00:00:00&#43;00:00'/><meta property='og:image' content='https://cheneycqg.github.io/post/rabbitmq/1.jpg' />
<meta name="twitter:title" content="RabbitMQ">
<meta name="twitter:description" content="RabbitMQ‰ªãÁªçÂíå‰ΩøÁî®"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://cheneycqg.github.io/post/rabbitmq/1.jpg' />
    <link rel="shortcut icon" href="/img/avatar.jpg" />

    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/avatar_hu8558358a36cd5b5f5be6e79535866837_28999_300x0_resize_q75_box.jpg" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üç•</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/">Cheney Site</a></h1>
            <h2 class="site-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit.</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/CaiJimmy/hugo-theme-stack'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://twitter.com'
                        target="_blank"
                        title="Twitter"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-twitter" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z" />
</svg>



                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/page/links/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5" />
  <path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5" />
</svg>



                
                <span>Links</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://cheneycqg.github.io/zh-cn/" >‰∏≠Êñá</option>
                        
                            <option value="https://cheneycqg.github.io/ar/" >ÿπÿ±ÿ®Ÿä</option>
                        
                            <option value="https://cheneycqg.github.io/" selected></option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span>Dark Mode</span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ul>
    <li><a href="#rabbitmq">RabbitMQ</a></li>
    <li><a href="#‰∏Ä-mq‰ªãÁªç">‰∏Ä MQ‰ªãÁªç</a>
      <ul>
        <li><a href="#1‰ªÄ‰πàÊòØmq">1.‰ªÄ‰πàÊòØMQ</a></li>
      </ul>
    </li>
    <li><a href="#2mqÁöÑ‰ΩúÁî®">2.MQÁöÑ‰ΩúÁî®</a>
      <ul>
        <li><a href="#21-ÊµÅÈáèÊ∂àÂ≥∞">2.1 ÊµÅÈáè==Ê∂àÂ≥∞==</a></li>
        <li><a href="#22-Â∫îÁî®Ëß£ËÄ¶">2.2 Â∫îÁî®==Ëß£ËÄ¶==</a></li>
        <li><a href="#23-ÂºÇÊ≠•ÊèêÂçáÊïàÁéá">2.3 ==ÂºÇÊ≠•==ÊèêÂçáÊïàÁéá</a></li>
      </ul>
    </li>
    <li><a href="#3mqÁöÑÂàÜÁ±ª">3.MQÁöÑÂàÜÁ±ª</a></li>
    <li><a href="#4mqÁöÑÈÄâÊã©">4.MQÁöÑÈÄâÊã©</a></li>
    <li><a href="#‰∫årabbitmqÁöÑÂü∫Êú¨Êû∂ÊûÑ">‰∫å.RabbitMQÁöÑÂü∫Êú¨Êû∂ÊûÑ</a>
      <ul>
        <li><a href="#1ÂõõÂ§ßÊ†∏ÂøÉÊ¶ÇÂøµÁ±ª‰ºº‰∫éÂø´ÈÄíÁ´ô">1.ÂõõÂ§ßÊ†∏ÂøÉÊ¶ÇÂøµ[Á±ª‰ºº‰∫éÂø´ÈÄíÁ´ô]</a></li>
        <li><a href="#2rabbitmqÊû∂ÊûÑ">2.RabbitMQÊû∂ÊûÑ</a></li>
        <li><a href="#3ÂÆâË£Örabbit">3.ÂÆâË£ÖRabbit</a></li>
        <li><a href="#5ÂÜçÊ¨°Âà©Áî®-admin-Áî®Êà∑ÁôªÂΩï">5.ÂÜçÊ¨°Âà©Áî® admin Áî®Êà∑ÁôªÂΩï</a></li>
        <li><a href="#6ÈáçÁΩÆÂëΩ‰ª§">6.ÈáçÁΩÆÂëΩ‰ª§</a></li>
      </ul>
    </li>
    <li><a href="#‰∏ârabbitmqÂÖ•Èó®">‰∏â.RabbitMQÂÖ•Èó®</a>
      <ul>
        <li><a href="#31-ÁéØÂ¢ÉÂáÜÂ§á">3.1 ÁéØÂ¢ÉÂáÜÂ§á</a></li>
        <li><a href="#32-Ê∂àÊÅØÁîü‰∫ßËÄÖ">3.2 Ê∂àÊÅØÁîü‰∫ßËÄÖ</a></li>
        <li><a href="#33-Ê∂àÊÅØÊ∂àË¥πËÄÖ">3.3 Ê∂àÊÅØÊ∂àË¥πËÄÖ</a></li>
        <li><a href="#34-Ê∂àÊÅØÂ∫îÁ≠îÈù¢ËØïÈ¢òÂ¶Ç‰Ωï‰øùËØÅÊ∂àË¥πËÄÖÊ∂àÊÅØ‰∏ç‰∏¢Â§±">==3.4 Ê∂àÊÅØÂ∫îÁ≠î(Èù¢ËØïÈ¢ò:Â¶Ç‰Ωï‰øùËØÅÊ∂àË¥πËÄÖÊ∂àÊÅØ‰∏ç‰∏¢Â§±)==</a></li>
        <li><a href="#35-Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü">3.5 Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü</a></li>
        <li><a href="#36-Ê∂àÊÅØÊâãÂä®Â∫îÁ≠î‰ª£Á†Å">3.6 Ê∂àÊÅØÊâãÂä®Â∫îÁ≠î‰ª£Á†Å</a></li>
        <li><a href="#37-rabbitmq-ÊåÅ‰πÖÂåñ">3.7 RabbitMQ ÊåÅ‰πÖÂåñ</a></li>
        <li><a href="#38-Áîü‰∫ßËÄÖÊ∂àÊÅØÂèëÂ∏ÉÁ°ÆËÆ§">3.8 Áîü‰∫ßËÄÖÊ∂àÊÅØÂèëÂ∏ÉÁ°ÆËÆ§</a></li>
        <li><a href="#39--‰∫§Êç¢Êú∫">3.9  ‰∫§Êç¢Êú∫</a></li>
      </ul>
    </li>
    <li><a href="#Âõõ-rabbitmqÂÖ∂‰ªñ">Âõõ RabbitMQÂÖ∂‰ªñ</a>
      <ul>
        <li><a href="#41-Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ">4.1 Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ</a></li>
        <li><a href="#42-Âª∂ËøüÈòüÂàóÊ≠£Â∏∏‰∫§Êç¢Êú∫ttlÊ®°ÊãüÂá∫Êù•ÁöÑ">4.2 Âª∂ËøüÈòüÂàó(Ê≠£Â∏∏‰∫§Êç¢Êú∫+TTLÊ®°ÊãüÂá∫Êù•ÁöÑ)</a></li>
        <li><a href="#43-Êï¥Âêà-springboot">4.3 Êï¥Âêà springboot</a></li>
        <li><a href="#44-ÂπÇÁ≠âÊÄß">4.4 ÂπÇÁ≠âÊÄß</a></li>
      </ul>
    </li>
    <li><a href="#‰∫î-rabbitmq-ÈõÜÁæ§">‰∫î RabbitMQ ÈõÜÁæ§</a>
      <ul>
        <li><a href="#51-‰ΩøÁî®ÈõÜÁæ§ÁöÑÂéüÂõ†">5.1 ‰ΩøÁî®ÈõÜÁæ§ÁöÑÂéüÂõ†</a></li>
        <li><a href="#52-ÊôÆÈÄöÈõÜÁæ§Êê≠Âª∫Ê≠•È™§">5.2 ÊôÆÈÄöÈõÜÁæ§Êê≠Âª∫Ê≠•È™§</a></li>
        <li><a href="#53-Êê≠Âª∫ÈïúÂÉèÈõÜÁæ§">5.3 Êê≠Âª∫ÈïúÂÉèÈõÜÁæ§</a></li>
      </ul>
    </li>
  </ul>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/post/rabbitmq/">
                <img src="/post/rabbitmq/1_hu66dae819074df657122ccf810f7b95ce_166227_800x0_resize_q75_box.jpg"
                        srcset="/post/rabbitmq/1_hu66dae819074df657122ccf810f7b95ce_166227_800x0_resize_q75_box.jpg 800w, /post/rabbitmq/1_hu66dae819074df657122ccf810f7b95ce_166227_1600x0_resize_q75_box.jpg 1600w"
                        width="800" 
                        height="340" 
                        loading="lazy"
                        alt="Featured image of post RabbitMQ" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/rabbitmq/" >
                RabbitMQ
            </a>
        
            <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" >
                ‰∏≠Èó¥‰ª∂
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/post/rabbitmq/">RabbitMQ</a>
        </h2>
    
        
        <h3 class="article-subtitle">
            RabbitMQ‰ªãÁªçÂíå‰ΩøÁî®
        </h3>
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Sep 08, 2023</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    11 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>

</header>

    <section class="article-content">
    
    
    <p>RabbitMQ‰ªãÁªçÂíå‰ΩøÁî®</p>
<h2 id="rabbitmq">RabbitMQ</h2>
<h2 id="‰∏Ä-mq‰ªãÁªç">‰∏Ä MQ‰ªãÁªç</h2>
<h3 id="1‰ªÄ‰πàÊòØmq">1.‰ªÄ‰πàÊòØMQ</h3>
<p>MQ(message queue)Ôºå‰ªéÂ≠óÈù¢ÊÑèÊÄù‰∏äÁúãÔºåÊú¨Ë¥®ÊòØ‰∏™ÈòüÂàóÔºåFIFO  ÂÖàÂÖ•ÂÖàÂá∫ÔºåÂè™‰∏çËøáÈòüÂàó‰∏≠Â≠òÊîæÁöÑÂÜÖÂÆπÊòØ message ËÄåÂ∑≤ÔºåËøòÊòØ‰∏ÄÁßçË∑®ËøõÁ®ãÁöÑÈÄö‰ø°Êú∫Âà∂ÔºåÁî®‰∫é‰∏ä‰∏ãÊ∏∏‰º†ÈÄíÊ∂àÊÅØ„ÄÇÂú®‰∫íËÅîÁΩëÊû∂ÊûÑ‰∏≠ÔºåMQ ÊòØ‰∏ÄÁßçÈùûÂ∏∏Â∏∏  ËßÅÁöÑ‰∏ä‰∏ãÊ∏∏„ÄåÈÄªËæëËß£ËÄ¶ + Áâ©ÁêÜËß£ËÄ¶„ÄçÁöÑÊ∂àÊÅØÈÄö‰ø°ÊúçÂä°„ÄÇ‰ΩøÁî®‰∫Ü MQ ‰πãÂêéÔºåÊ∂àÊÅØÂèëÈÄÅ‰∏äÊ∏∏Âè™ÈúÄË¶Å‰æùËµñ MQÔºå‰∏çÁî®‰æùËµñÂÖ∂‰ªñÊúçÂä°„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/1682473534176.png"
	width="1383"
	height="716"
	srcset="/post/rabbitmq/assets/1682473534176_hu3408f0f13048723355eb1f835f38c53a_33218_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682473534176_hu3408f0f13048723355eb1f835f38c53a_33218_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682473534176"
	
	
		class="gallery-image" 
		data-flex-grow="193"
		data-flex-basis="463px"
	
></p>
<h2 id="2mqÁöÑ‰ΩúÁî®">2.MQÁöÑ‰ΩúÁî®</h2>
<h3 id="21-ÊµÅÈáèÊ∂àÂ≥∞">2.1 ÊµÅÈáè==Ê∂àÂ≥∞==</h3>
<p>‰∏æ‰∏™‰æãÂ≠êÔºåÂ¶ÇÊûúËÆ¢ÂçïÁ≥ªÁªüÊúÄÂ§öËÉΩÂ§ÑÁêÜ‰∏Ä‰∏áÊ¨°ËÆ¢ÂçïÔºåËøô‰∏™Â§ÑÁêÜËÉΩÂäõÂ∫î‰ªòÊ≠£Â∏∏Êó∂ÊÆµÁöÑ‰∏ãÂçïÊó∂Áª∞Áª∞Êúâ‰ΩôÔºåÊ≠£Â∏∏Êó∂ÊÆµÊàë‰ª¨‰∏ãÂçï‰∏ÄÁßíÂêéÂ∞±ËÉΩËøîÂõûÁªìÊûú„ÄÇ‰ΩÜÊòØÂú®È´òÂ≥∞ÊúüÔºåÂ¶ÇÊûúÊúâ‰∏§‰∏áÊ¨°‰∏ãÂçïÊìç‰ΩúÁ≥ªÁªüÊòØÂ§ÑÁêÜ‰∏ç‰∫ÜÁöÑÔºåÂè™ËÉΩÈôêÂà∂ËÆ¢ÂçïË∂ÖËøá‰∏Ä‰∏áÂêé‰∏çÂÖÅËÆ∏Áî®Êà∑‰∏ãÂçï„ÄÇ‰ΩøÁî®Ê∂àÊÅØÈòüÂàóÂÅöÁºìÂÜ≤ÔºåÊàë‰ª¨ÂèØ‰ª•ÂèñÊ∂àËøô‰∏™ÈôêÂà∂ÔºåÊää‰∏ÄÁßíÂÜÖ‰∏ãÁöÑËÆ¢ÂçïÂàÜ  Êï£Êàê‰∏ÄÊÆµÊó∂Èó¥Êù•Â§ÑÁêÜÔºåËøôÊó∂Êúâ‰∫õÁî®Êà∑ÂèØËÉΩÂú®‰∏ãÂçïÂçÅÂá†ÁßíÂêéÊâçËÉΩÊî∂Âà∞‰∏ãÂçïÊàêÂäüÁöÑÊìç‰ΩúÔºå‰ΩÜÊòØÊØî‰∏çËÉΩ‰∏ãÂçïÁöÑ‰ΩìÈ™åË¶ÅÂ•Ω„ÄÇ</p>
<h3 id="22-Â∫îÁî®Ëß£ËÄ¶">2.2 Â∫îÁî®==Ëß£ËÄ¶==</h3>
<p>‰ª•ÁîµÂïÜÂ∫îÁî®‰∏∫‰æãÔºåÂ∫îÁî®‰∏≠ÊúâËÆ¢ÂçïÁ≥ªÁªü„ÄÅÂ∫ìÂ≠òÁ≥ªÁªü„ÄÅÁâ©ÊµÅÁ≥ªÁªü„ÄÅÊîØ‰ªòÁ≥ªÁªü„ÄÇÁî®Êà∑ÂàõÂª∫ËÆ¢ÂçïÂêéÔºåÂ¶ÇÊûúËÄ¶ÂêàË∞ÉÁî®Â∫ìÂ≠òÁ≥ªÁªü„ÄÅÁâ©ÊµÅÁ≥ªÁªü„ÄÅÊîØ‰ªòÁ≥ªÁªüÔºå‰ªª‰Ωï‰∏Ä‰∏™Â≠êÁ≥ªÁªüÂá∫‰∫ÜÊïÖÈöúÔºåÈÉΩ‰ºöÈÄ†Êàê‰∏ãÂçïÊìç‰ΩúÂºÇÂ∏∏„ÄÇÂΩìËΩ¨ÂèòÊàêÂü∫‰∫éÊ∂àÊÅØÈòüÂàóÁöÑÊñπÂºèÂêéÔºåÁ≥ªÁªüÈó¥Ë∞ÉÁî®ÁöÑÈóÆÈ¢ò‰ºöÂáèÂ∞ëÂæàÂ§öÔºåÊØîÂ¶ÇÁâ©ÊµÅÁ≥ªÁªüÂõ†‰∏∫ÂèëÁîüÊïÖÈöúÔºåÈúÄË¶ÅÂá†ÂàÜÈíüÊù•‰øÆÂ§ç„ÄÇÂú®ËøôÂá†ÂàÜÈíüÁöÑÊó∂Èó¥ÈáåÔºåÁâ©ÊµÅÁ≥ªÁªüË¶ÅÂ§ÑÁêÜÁöÑÂÜÖÂ≠òË¢´ÁºìÂ≠òÂú®Ê∂àÊÅØÈòüÂàó‰∏≠ÔºåÁî®Êà∑ÁöÑ‰∏ãÂçïÊìç‰ΩúÂèØ‰ª•Ê≠£Â∏∏ÂÆåÊàê„ÄÇÂΩìÁâ©ÊµÅÁ≥ªÁªüÊÅ¢Â§çÂêéÔºåÁªßÁª≠Â§ÑÁêÜËÆ¢Âçï‰ø°ÊÅØÂç≥ÂèØÔºå‰∏≠ÂçïÁî®Êà∑ÊÑüÂèó‰∏çÂà∞Áâ©ÊµÅÁ≥ªÁªüÁöÑÊïÖÈöúÔºåÊèêÂçáÁ≥ªÁªüÁöÑÂèØÁî®ÊÄß„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/1682382912449.png"
	width="1121"
	height="336"
	srcset="/post/rabbitmq/assets/1682382912449_hu8662e74affdec10e0cb61c25446b676e_124647_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682382912449_hu8662e74affdec10e0cb61c25446b676e_124647_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682382912449"
	
	
		class="gallery-image" 
		data-flex-grow="333"
		data-flex-basis="800px"
	
></p>
<h3 id="23-ÂºÇÊ≠•ÊèêÂçáÊïàÁéá">2.3 ==ÂºÇÊ≠•==ÊèêÂçáÊïàÁéá</h3>
<p>Âú∫ÊôØËØ¥ÊòéÔºöÁî®Êà∑ÈúÄÂèëÈÄÅÁü≠‰ø°È™åËØÅÁ†ÅÊó∂ÔºåÁÇπÂáªÂèëÈÄÅÁü≠‰ø°ÔºåÁ¨¨‰∏âÊñπÂπ≥Âè∞ÂèëÈÄÅÁü≠‰ø°Ëá≥Áî®Êà∑ÊâãÊú∫ÊàêÂäüÔºåÊâßË°åÂÄíËÆ°Êó∂60Áßí„ÄÇ‰º†ÁªüÁöÑÂÅöÊ≥ïÊúâ‰∏§Áßç 1.‰∏≤Ë°åÁöÑÊñπÂºè;2.Âπ∂Ë°åÊñπÂºèÔºö</p>
<h2 id="3mqÁöÑÂàÜÁ±ª">3.MQÁöÑÂàÜÁ±ª</h2>
<ul>
<li>
<p><strong>ActiveMQ</strong></p>
<p>‰ºòÁÇπÔºöÂçïÊú∫ÂêûÂêêÈáè‰∏áÁ∫ßÔºåÊó∂ÊïàÊÄß ms Á∫ßÔºåÂèØÁî®ÊÄßÈ´òÔºåÂü∫‰∫é‰∏ª‰ªéÊû∂ÊûÑÂÆûÁé∞È´òÂèØÁî®ÊÄßÔºåÊ∂àÊÅØÂèØÈù†ÊÄßËæÉ ‰ΩéÁöÑÊ¶ÇÁéá‰∏¢Â§±Êï∞ÊçÆ</p>
<p>Áº∫ÁÇπÔºöÂÆòÊñπÁ§æÂå∫Áé∞Âú®ÂØπ ActiveMQ 5.x Áª¥Êä§Ë∂äÊù•Ë∂äÂ∞ëÔºåÈ´òÂêûÂêêÈáèÂú∫ÊôØËæÉÂ∞ë‰ΩøÁî®</p>
</li>
<li>
<p><strong>Kafka</strong></p>
<p>Â§ßÊï∞ÊçÆÁöÑÊùÄÊâãÈîèÔºåË∞àÂà∞Â§ßÊï∞ÊçÆÈ¢ÜÂüüÂÜÖÁöÑÊ∂àÊÅØ‰º†ËæìÔºåÂàôÁªï‰∏çÂºÄ  KafkaÔºåËøôÊ¨æ‰∏∫Â§ßÊï∞ÊçÆËÄåÁîüÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂Ôºå‰ª•ÂÖ∂Áôæ‰∏áÁ∫ß TPS  ÁöÑÂêûÂêêÈáèÂêçÂ£∞Â§ßÂô™ÔºåËøÖÈÄüÊàê‰∏∫Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑÂÆ†ÂÑøÔºåÂú®Êï∞ÊçÆÈááÈõÜ„ÄÅ‰º†Ëæì„ÄÅÂ≠òÂÇ®ÁöÑËøáÁ®ã‰∏≠ÂèëÊå•ÁùÄ‰∏æË∂≥ËΩªÈáçÁöÑ‰ΩúÁî®„ÄÇÁõÆÂâçÂ∑≤ÁªèË¢´  LinkedInÔºåUberÔºåTwitterÔºåNetflix Á≠âÂ§ßÂÖ¨Âè∏ÊâÄÈááÁ∫≥„ÄÇ</p>
<p>‰ºòÁÇπ: ÊÄßËÉΩÂçìË∂äÔºåÂçïÊú∫ÂÜôÂÖ• TPS  Á∫¶Âú®Áôæ‰∏áÊù°/ÁßíÔºåÊúÄÂ§ßÁöÑ‰ºòÁÇπÔºåÂ∞±ÊòØÂêûÂêêÈáèÈ´ò„ÄÇÊó∂ÊïàÊÄß ms Á∫ßÂèØÁî®ÊÄßÈùûÂ∏∏È´òÔºåkafka  ÊòØÂàÜÂ∏ÉÂºèÁöÑÔºå‰∏Ä‰∏™Êï∞ÊçÆÂ§ö‰∏™ÂâØÊú¨ÔºåÂ∞ëÊï∞Êú∫Âô®ÂÆïÊú∫Ôºå‰∏ç‰ºö‰∏¢Â§±Êï∞ÊçÆÔºå‰∏ç‰ºöÂØºËá¥‰∏çÂèØÁî®,Ê∂àË¥πËÄÖÈááÁî® Pull  ÊñπÂºèËé∑ÂèñÊ∂àÊÅØÔºåÊ∂àÊÅØÊúâÂ∫èÔºåÈÄöËøáÊéßÂà∂ËÉΩÂ§ü‰øùËØÅÊâÄÊúâÊ∂àÊÅØË¢´Ê∂àË¥π‰∏î‰ªÖË¢´Ê∂àË¥π‰∏ÄÊ¨°ÔºõÊúâ‰ºòÁßÄÁöÑÁ¨¨‰∏âÊñπKafka Web ÁÆ°ÁêÜÁïåÈù¢  Kafka-ManagerÔºõÂú®Êó•ÂøóÈ¢ÜÂüüÊØîËæÉÊàêÁÜüÔºåË¢´Â§öÂÆ∂ÂÖ¨Âè∏ÂíåÂ§ö‰∏™ÂºÄÊ∫êÈ°πÁõÆ‰ΩøÁî®ÔºõÂäüËÉΩÊîØÊåÅÔºöÂäüËÉΩ ËæÉ‰∏∫ÁÆÄÂçïÔºå‰∏ªË¶ÅÊîØÊåÅÁÆÄÂçïÁöÑ MQ  ÂäüËÉΩÔºåÂú®Â§ßÊï∞ÊçÆÈ¢ÜÂüüÁöÑÂÆûÊó∂ËÆ°ÁÆó‰ª•ÂèäÊó•ÂøóÈááÈõÜË¢´Â§ßËßÑÊ®°‰ΩøÁî®</p>
<p>Áº∫ÁÇπÔºöKafka ÂçïÊú∫Ë∂ÖËøá 64 ‰∏™ÈòüÂàó/ÂàÜÂå∫ÔºåLoad ‰ºöÂèëÁîüÊòéÊòæÁöÑÈ£ôÈ´òÁé∞Ë±°ÔºåÈòüÂàóË∂äÂ§öÔºåload Ë∂äÈ´òÔºåÂèëÈÄÅÊ∂àÊÅØÂìçÂ∫îÊó∂Èó¥ÂèòÈïøÔºå‰ΩøÁî®Áü≠ËΩÆËØ¢ÊñπÂºèÔºåÂÆûÊó∂ÊÄßÂèñÂÜ≥‰∫éËΩÆËØ¢Èó¥ÈöîÊó∂Èó¥ÔºåÊ∂àË¥πÂ§±Ë¥•‰∏çÊîØÊåÅÈáçËØïÔºõÊîØÊåÅÊ∂àÊÅØÈ°∫Â∫èÔºå‰ΩÜÊòØ‰∏ÄÂè∞‰ª£ÁêÜÂÆïÊú∫ÂêéÔºåÂ∞±‰ºö‰∫ßÁîüÊ∂àÊÅØ‰π±Â∫èÔºåÁ§æÂå∫Êõ¥Êñ∞ËæÉÊÖ¢</p>
</li>
<li>
<p><strong>RocketMQ</strong></p>
<p>RocketMQ Âá∫Ëá™ÈòøÈáåÂ∑¥Â∑¥ÁöÑÂºÄÊ∫ê‰∫ßÂìÅÔºåÁî® Java ËØ≠Ë®ÄÂÆûÁé∞ÔºåÂú®ËÆæËÆ°Êó∂ÂèÇËÄÉ‰∫Ü KafkaÔºåÂπ∂ÂÅöÂá∫‰∫ÜËá™Â∑±ÁöÑ‰∏Ä‰∫õÊîπËøõ„ÄÇË¢´ÈòøÈáåÂ∑¥Â∑¥ÂπøÊ≥õÂ∫îÁî®Âú®ËÆ¢ÂçïÔºå‰∫§ÊòìÔºåÂÖÖÂÄºÔºåÊµÅËÆ°ÁÆóÔºåÊ∂àÊÅØÊé®ÈÄÅÔºåÊó•ÂøóÊµÅÂºèÂ§ÑÁêÜÔºåbinglog ÂàÜÂèëÁ≠âÂú∫ÊôØ„ÄÇ</p>
<p>‰ºòÁÇπÔºöÂçïÊú∫ÂêûÂêêÈáèÂçÅ‰∏áÁ∫ßÔºåÂèØÁî®ÊÄßÈùûÂ∏∏È´òÔºåÂàÜÂ∏ÉÂºèÊû∂ÊûÑ,Ê∂àÊÅØÂèØ‰ª•ÂÅöÂà∞ 0 ‰∏¢Â§±,MQ ÂäüËÉΩËæÉ‰∏∫ÂÆåÂñÑÔºåËøòÊòØÂàÜÂ∏ÉÂºèÁöÑÔºåÊâ©Â±ïÊÄßÂ•Ω,ÊîØÊåÅ 10 ‰∫øÁ∫ßÂà´ÁöÑÊ∂àÊÅØÂ†ÜÁßØÔºå‰∏ç‰ºöÂõ†‰∏∫Â†ÜÁßØÂØºËá¥ÊÄßËÉΩ‰∏ãÈôçÔºåÊ∫êÁ†ÅÊòØ java Êàë‰ª¨ÂèØ‰ª•Ëá™Â∑±ÈòÖËØªÊ∫êÁ†ÅÔºåÂÆöÂà∂Ëá™Â∑±ÂÖ¨Âè∏ÁöÑ MQ</p>
<p>Áº∫ÁÇπÔºöÊîØÊåÅÁöÑÂÆ¢Êà∑Á´ØËØ≠Ë®Ä‰∏çÂ§öÔºåÁõÆÂâçÊòØ java Âèä c++ÔºåÂÖ∂‰∏≠ c++ ‰∏çÊàêÁÜüÔºõÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶‰∏ÄËà¨,Ê≤°ÊúâÂú® MQ Ê†∏ÂøÉ‰∏≠ÂéªÂÆûÁé∞ JMS Á≠âÊé•Âè£,Êúâ‰∫õÁ≥ªÁªüË¶ÅËøÅÁßªÈúÄË¶Å‰øÆÊîπÂ§ßÈáè‰ª£Á†Å</p>
</li>
<li>
<p><strong>RabbitMQ</strong></p>
<p>2007 Âπ¥ÂèëÂ∏ÉÔºåÊòØ‰∏Ä‰∏™Âú®AMQP(È´òÁ∫ßÊ∂àÊÅØÈòüÂàóÂçèËÆÆ)Âü∫Á°Ä‰∏äÂÆåÊàêÁöÑÔºåÂèØÂ§çÁî®ÁöÑ‰ºÅ‰∏öÊ∂àÊÅØÁ≥ªÁªüÔºåÊòØÂΩìÂâçÊúÄ‰∏ªÊµÅÁöÑÊ∂àÊÅØ‰∏≠Èó¥‰ª∂‰πã‰∏Ä„ÄÇ</p>
<p>‰ºòÁÇπÔºöÁî±‰∫é  erlang ËØ≠Ë®ÄÁöÑÈ´òÂπ∂ÂèëÁâπÊÄßÔºåÊÄßËÉΩËæÉÂ•ΩÔºõÂêûÂêêÈáèÂà∞‰∏áÁ∫ßÔºåMQ ÂäüËÉΩÊØîËæÉÂÆåÂ§á,ÂÅ•Â£Æ„ÄÅÁ®≥ÂÆö„ÄÅÊòìÁî®„ÄÅË∑®Âπ≥Âè∞„ÄÅÊîØÊåÅÂ§öÁßçËØ≠Ë®Ä  Â¶ÇÔºöPython„ÄÅRuby„ÄÅ.NET„ÄÅJava„ÄÅJMS„ÄÅC„ÄÅPHP„ÄÅActionScript„ÄÅXMPP„ÄÅSTOMP Á≠âÔºåÊîØÊåÅ AJAX  ÊñáÊ°£ÈΩêÂÖ®ÔºõÂºÄÊ∫êÊèê‰æõÁöÑÁÆ°ÁêÜÁïåÈù¢ÈùûÂ∏∏Ê£íÔºåÁî®Ëµ∑Êù•ÂæàÂ•ΩÁî®,Á§æÂå∫Ê¥ªË∑ÉÂ∫¶È´òÔºõÊõ¥Êñ∞È¢ëÁéáÁõ∏ÂΩìÈ´ò</p>
<p>Áº∫ÁÇπÔºöË¥µ</p>
</li>
</ul>
<h2 id="4mqÁöÑÈÄâÊã©">4.MQÁöÑÈÄâÊã©</h2>
<ul>
<li>
<p>**Kafka **</p>
<p>Kafka ‰∏ªË¶ÅÁâπÁÇπÊòØÂü∫‰∫é Pull ÁöÑÊ®°ÂºèÊù•Â§ÑÁêÜÊ∂àÊÅØÊ∂àË¥πÔºåËøΩÊ±ÇÈ´òÂêûÂêêÈáèÔºå‰∏ÄÂºÄÂßãÁöÑÁõÆÁöÑÂ∞±ÊòØÁî®‰∫éÊó•ÂøóÊî∂ÈõÜÂíå‰º†ËæìÔºåÈÄÇÂêà‰∫ßÁîüÂ§ßÈáèÊï∞ÊçÆÁöÑ‰∫íËÅîÁΩëÊúçÂä°ÁöÑÊï∞ÊçÆÊî∂ÈõÜ‰∏öÂä°„ÄÇÂ§ßÂûãÂÖ¨Âè∏Âª∫ËÆÆÂèØ‰ª•ÈÄâÁî®ÔºåÂ¶ÇÊûúÊúâÊó•ÂøóÈááÈõÜÂäüËÉΩÔºåËÇØÂÆöÊòØÈ¶ñÈÄâ kafka ‰∫Ü„ÄÇ</p>
</li>
<li>
<p><strong>RocketMQ</strong></p>
<p>Â§©Áîü‰∏∫ÈáëËûç‰∫íËÅîÁΩëÈ¢ÜÂüüËÄåÁîüÔºåÂØπ‰∫éÂèØÈù†ÊÄßË¶ÅÊ±ÇÂæàÈ´òÁöÑÂú∫ÊôØÔºåÂ∞§ÂÖ∂ÊòØÁîµÂïÜÈáåÈù¢ÁöÑËÆ¢ÂçïÊâ£Ê¨æÔºå‰ª•Âèä‰∏öÂä°ÂâäÂ≥∞ÔºåÂú®Â§ßÈáè‰∫§ÊòìÊ∂åÂÖ•Êó∂ÔºåÂêéÁ´ØÂèØËÉΩÊó†Ê≥ïÂèäÊó∂Â§ÑÁêÜÁöÑÊÉÖÂÜµ„ÄÇRoketMQ  Âú®Á®≥ÂÆöÊÄß‰∏äÂèØËÉΩÊõ¥ÂÄºÂæó‰ø°ËµñÔºåËøô‰∫õ‰∏öÂä°Âú∫ÊôØÂú®ÈòøÈáåÂèå 11 Â∑≤ÁªèÁªèÂéÜ‰∫ÜÂ§öÊ¨°ËÄÉÈ™åÔºåÂ¶ÇÊûú‰Ω†ÁöÑ‰∏öÂä°Êúâ‰∏äËø∞Âπ∂ÂèëÂú∫ÊôØÔºåÂª∫ËÆÆÂèØ‰ª•ÈÄâÊã© RocketMQ„ÄÇ</p>
</li>
<li>
<p><strong>RabbitMQ</strong></p>
<p>ÁªìÂêà erlang ËØ≠Ë®ÄÊú¨Ë∫´ÁöÑÂπ∂Âèë‰ºòÂäøÔºåÊÄßËÉΩÂ•ΩÊó∂ÊïàÊÄßÂæÆÁßíÁ∫ßÔºåÁ§æÂå∫Ê¥ªË∑ÉÂ∫¶‰πüÊØîËæÉÈ´òÔºåÁÆ°ÁêÜÁïåÈù¢Áî®Ëµ∑Êù•ÂçÅÂàÜ Êñπ‰æøÔºåÂ¶ÇÊûú‰Ω†ÁöÑÊï∞ÊçÆÈáèÊ≤°ÊúâÈÇ£‰πàÂ§ßÔºå‰∏≠Â∞èÂûãÂÖ¨Âè∏‰ºòÂÖàÈÄâÊã©ÂäüËÉΩÊØîËæÉÂÆåÂ§áÁöÑ RabbitMQ„ÄÇ</p>
</li>
</ul>
<h2 id="‰∫årabbitmqÁöÑÂü∫Êú¨Êû∂ÊûÑ">‰∫å.RabbitMQÁöÑÂü∫Êú¨Êû∂ÊûÑ</h2>
<h3 id="1ÂõõÂ§ßÊ†∏ÂøÉÊ¶ÇÂøµÁ±ª‰ºº‰∫éÂø´ÈÄíÁ´ô">1.ÂõõÂ§ßÊ†∏ÂøÉÊ¶ÇÂøµ[Á±ª‰ºº‰∫éÂø´ÈÄíÁ´ô]</h3>
<ul>
<li>
<p>Áîü‰∫ßËÄÖ
‰∫ßÁîüÊï∞ÊçÆÂèëÈÄÅÊ∂àÊÅØÁöÑÁ®ãÂ∫èÊòØÁîü‰∫ßËÄÖ</p>
</li>
<li>
<p>‰∫§Êç¢Êú∫
‰∫§Êç¢Êú∫ÊòØ RabbitMQ ÈùûÂ∏∏ÈáçË¶ÅÁöÑ‰∏Ä‰∏™ÈÉ®‰ª∂Ôºå‰∏ÄÊñπÈù¢ÂÆÉÊé•Êî∂Êù•Ëá™Áîü‰∫ßËÄÖÁöÑÊ∂àÊÅØÔºåÂè¶‰∏ÄÊñπÈù¢ÂÆÉÂ∞ÜÊ∂àÊÅØÊé®ÈÄÅÂà∞ÈòüÂàó‰∏≠„ÄÇ‰∫§Êç¢Êú∫ÂøÖÈ°ªÁ°ÆÂàáÁü•ÈÅìÂ¶Ç‰ΩïÂ§ÑÁêÜÂÆÉÊé•Êî∂Âà∞ÁöÑÊ∂àÊÅØÔºåÊòØÂ∞ÜËøô‰∫õÊ∂àÊÅØÊé®ÈÄÅÂà∞ÁâπÂÆöÈòüÂàóËøòÊòØÊé®
ÈÄÅÂà∞Â§ö‰∏™ÈòüÂàóÔºå‰∫¶ÊàñËÄÖÊòØÊääÊ∂àÊÅØ‰∏¢ÂºÉÔºåËøô‰∏™ÂæóÊúâ‰∫§Êç¢Êú∫Á±ªÂûãÂÜ≥ÂÆö</p>
</li>
<li>
<p>ÈòüÂàó</p>
<p>ÈòüÂàóÊòØ RabbitMQ ÂÜÖÈÉ®‰ΩøÁî®ÁöÑ‰∏ÄÁßçÊï∞ÊçÆÁªìÊûÑÔºåÂ∞ΩÁÆ°Ê∂àÊÅØÊµÅÁªè RabbitMQ ÂíåÂ∫îÁî®Á®ãÂ∫èÔºå‰ΩÜÂÆÉ‰ª¨Âè™ËÉΩÂ≠òÂÇ®Âú®ÈòüÂàó‰∏≠„ÄÇÈòüÂàó‰ªÖÂèó‰∏ªÊú∫ÁöÑÂÜÖÂ≠òÂíåÁ£ÅÁõòÈôêÂà∂ÁöÑÁ∫¶ÊùüÔºåÊú¨Ë¥®‰∏äÊòØ‰∏Ä‰∏™Â§ßÁöÑÊ∂àÊÅØÁºìÂÜ≤Âå∫„ÄÇËÆ∏Â§öÁîü‰∫ßËÄÖÂèØ‰ª•Â∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞‰∏Ä‰∏™ÈòüÂàóÔºåËÆ∏Â§öÊ∂àË¥πËÄÖÂèØ‰ª•Â∞ùËØï‰ªé‰∏Ä‰∏™ÈòüÂàóÊé•Êî∂Êï∞ÊçÆ„ÄÇËøôÂ∞±ÊòØÊàë‰ª¨‰ΩøÁî®ÈòüÂàóÁöÑÊñπÂºè</p>
</li>
<li>
<p>Ê∂àË¥πËÄÖ
Ê∂àË¥π‰∏éÊé•Êî∂ÂÖ∑ÊúâÁõ∏‰ººÁöÑÂê´‰πâ„ÄÇÊ∂àË¥πËÄÖÂ§ßÂ§öÊó∂ÂÄôÊòØ‰∏Ä‰∏™Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØÁöÑÁ®ãÂ∫è„ÄÇËØ∑Ê≥®ÊÑèÁîü‰∫ßËÄÖÔºåÊ∂àË¥π
ËÄÖÂíåÊ∂àÊÅØ‰∏≠Èó¥‰ª∂ÂæàÂ§öÊó∂ÂÄôÂπ∂‰∏çÂú®Âêå‰∏ÄÊú∫Âô®‰∏ä„ÄÇÂêå‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÊó¢ÂèØ‰ª•ÊòØÁîü‰∫ßËÄÖÂèàÊòØÂèØ‰ª•ÊòØÊ∂àË¥πËÄÖ„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/1682475976581.png"
	width="1096"
	height="495"
	srcset="/post/rabbitmq/assets/1682475976581_hu31afd1df4a0b48f80a91ca8db3060f6e_15140_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682475976581_hu31afd1df4a0b48f80a91ca8db3060f6e_15140_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682475976581"
	
	
		class="gallery-image" 
		data-flex-grow="221"
		data-flex-basis="531px"
	
></p>
</li>
</ul>
<h3 id="2rabbitmqÊû∂ÊûÑ">2.RabbitMQÊû∂ÊûÑ</h3>
<p><img src="/post/rabbitmq/assets/1682383843615.png"
	width="1296"
	height="672"
	srcset="/post/rabbitmq/assets/1682383843615_hu22444a6ce21de7b110b80fc37082ea76_231852_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682383843615_hu22444a6ce21de7b110b80fc37082ea76_231852_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682383843615"
	
	
		class="gallery-image" 
		data-flex-grow="192"
		data-flex-basis="462px"
	
></p>
<p><code>Broker</code>ÔºöÊé•Êî∂ÂíåÂàÜÂèëÊ∂àÊÅØÁöÑÂ∫îÁî®ÔºåRabbitMQ Server Â∞±ÊòØ Message Broker</p>
<p><code>Virtual host</code>ÔºöÂá∫‰∫éÂ§öÁßüÊà∑ÂíåÂÆâÂÖ®Âõ†Á¥†ËÆæËÆ°ÁöÑÔºåÊää AMQP ÁöÑÂü∫Êú¨ÁªÑ‰ª∂ÂàíÂàÜÂà∞‰∏Ä‰∏™ËôöÊãüÁöÑÂàÜÁªÑ‰∏≠ÔºåÁ±ª‰ºº ‰∫éÁΩëÁªú‰∏≠ÁöÑ namespace Ê¶ÇÂøµ„ÄÇÂΩìÂ§ö‰∏™‰∏çÂêåÁöÑÁî®Êà∑‰ΩøÁî®Âêå‰∏Ä‰∏™ RabbitMQ server Êèê‰æõÁöÑÊúçÂä°Êó∂ÔºåÂèØ‰ª•ÂàíÂàÜÂá∫ Â§ö‰∏™ vhostÔºåÊØè‰∏™Áî®Êà∑Âú®Ëá™Â∑±ÁöÑ vhost ÂàõÂª∫ exchangeÔºèqueue Á≠â</p>
<p><code>Connection</code>ÔºöpublisherÔºèconsumer Âíå broker ‰πãÈó¥ÁöÑ TCP ËøûÊé•</p>
<p><code>Channel</code>ÔºöÂ¶ÇÊûúÊØè‰∏ÄÊ¨°ËÆøÈóÆ RabbitMQ ÈÉΩÂª∫Á´ã‰∏Ä‰∏™ ConnectionÔºåÂú®Ê∂àÊÅØÈáèÂ§ßÁöÑÊó∂ÂÄôÂª∫Á´ã TCP Connection ÁöÑÂºÄÈîÄÂ∞ÜÊòØÂ∑®Â§ßÁöÑÔºåÊïàÁéá‰πüËæÉ‰Ωé„ÄÇChannel ÊòØÂú® connection ÂÜÖÈÉ®Âª∫Á´ãÁöÑÈÄªËæëËøûÊé•ÔºåÂ¶ÇÊûúÂ∫îÁî®Á®ã Â∫èÊîØÊåÅÂ§öÁ∫øÁ®ãÔºåÈÄöÂ∏∏ÊØè‰∏™ thread ÂàõÂª∫ÂçïÁã¨ÁöÑ channel ËøõË°åÈÄöËÆØÔºåAMQP method ÂåÖÂê´‰∫Ü channel id Â∏ÆÂä©ÂÆ¢ Êà∑Á´ØÂíå message broker ËØÜÂà´ channelÔºåÊâÄ‰ª• channel ‰πãÈó¥ÊòØÂÆåÂÖ®ÈöîÁ¶ªÁöÑ„ÄÇChannel ‰Ωú‰∏∫ËΩªÈáèÁ∫ßÁöÑ Connection ÊûÅÂ§ßÂáèÂ∞ë‰∫ÜÊìç‰ΩúÁ≥ªÁªüÂª∫Á´ã TCP connection ÁöÑÂºÄÈîÄ</p>
<p><code>Exchange</code>Ôºömessage Âà∞Ëææ broker ÁöÑÁ¨¨‰∏ÄÁ´ôÔºåÊ†πÊçÆÂàÜÂèëËßÑÂàôÔºåÂåπÈÖçÊü•ËØ¢Ë°®‰∏≠ÁöÑ routing keyÔºåÂàÜÂèë Ê∂àÊÅØÂà∞ queue ‰∏≠Âéª„ÄÇÂ∏∏Áî®ÁöÑÁ±ªÂûãÊúâÔºödirect (point-to-point), topic (publish-subscribe) and fanout (multicast)</p>
<p><code>Queue</code>ÔºöÊ∂àÊÅØÊúÄÁªàË¢´ÈÄÅÂà∞ËøôÈáåÁ≠âÂæÖ consumer ÂèñËµ∞</p>
<p><code>Binding</code>Ôºöexchange Âíå queue ‰πãÈó¥ÁöÑËôöÊãüËøûÊé•Ôºåbinding ‰∏≠ÂèØ‰ª•ÂåÖÂê´ routingkeyÔºåBinding ‰ø°ÊÅØË¢´‰øùÂ≠òÂà∞ exchange ‰∏≠ÁöÑÊü•ËØ¢Ë°®‰∏≠ÔºåÁî®‰∫é message ÁöÑÂàÜÂèë‰æùÊçÆ</p>
<h3 id="3ÂÆâË£Örabbit">3.ÂÆâË£ÖRabbit</h3>
<p>1.ÂÆòÁΩëÂú∞ÂùÄ</p>
<p><code>https://www.rabbitmq.com/download.html </code></p>
<p>2.Êñá‰ª∂‰∏ä‰º†</p>
<p><code>‰∏ä‰º†Âà∞/usr/local/app ÁõÆÂΩï‰∏ã(Â¶ÇÊûúÊ≤°Êúâ software ÈúÄË¶ÅËá™Â∑±ÂàõÂª∫) </code></p>
<p>3.ÂÆâË£ÖÊñá‰ª∂(ÂàÜÂà´ÊåâÁÖß‰ª•‰∏ãÈ°∫Â∫èÂÆâË£Ö)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>rpm <span style="color:#f92672">-</span>ivh erlang<span style="color:#f92672">-</span><span style="color:#ae81ff">21.3</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>el7<span style="color:#f92672">.</span><span style="color:#a6e22e">x86_64</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rpm</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>yum install socat <span style="color:#f92672">-</span>y 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rpm <span style="color:#f92672">-</span>ivh rabbitmq<span style="color:#f92672">-</span>server<span style="color:#f92672">-</span><span style="color:#ae81ff">3.8.8</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1.</span>el7<span style="color:#f92672">.</span><span style="color:#a6e22e">noarch</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rpm</span> 
</span></span></code></pre></div><p>4.Â∏∏Áî®ÂëΩ‰ª§(ÊåâÁÖß‰ª•‰∏ãÈ°∫Â∫èÊâßË°å)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Ê∑ªÂä†ÂºÄÊú∫ÂêØÂä®</span> RabbitMQ <span style="color:#960050;background-color:#1e0010">ÊúçÂä°</span> 
</span></span><span style="display:flex;"><span>chkconfig rabbitmq<span style="color:#f92672">-</span>server on 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂêØÂä®ÊúçÂä°</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>sbin<span style="color:#f92672">/</span>service rabbitmq<span style="color:#f92672">-</span>server start  
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Êü•ÁúãÊúçÂä°Áä∂ÊÄÅ</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>sbin<span style="color:#f92672">/</span>service rabbitmq<span style="color:#f92672">-</span>server status 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂÅúÊ≠¢ÊúçÂä°</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">ÈÄâÊã©ÊâßË°å</span><span style="color:#f92672">)</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">/</span>sbin<span style="color:#f92672">/</span>service rabbitmq<span style="color:#f92672">-</span>server stop 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂºÄÂêØ</span> web <span style="color:#960050;background-color:#1e0010">ÁÆ°ÁêÜÊèí‰ª∂</span> 
</span></span><span style="display:flex;"><span>rabbitmq<span style="color:#f92672">-</span>plugins enable rabbitmq_management 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Áî®ÈªòËÆ§Ë¥¶Âè∑ÂØÜÁ†Å</span><span style="color:#f92672">(</span>guest<span style="color:#f92672">)</span><span style="color:#960050;background-color:#1e0010">ËÆøÈóÆÂú∞ÂùÄ</span> 
</span></span><span style="display:flex;"><span>http:<span style="color:#75715e">//RabbitMQËøêË°åÁöÑÊú∫Âô®ÁöÑIP:15672/
</span></span></span></code></pre></div><p><img src="/post/rabbitmq/assets/1682392854308.png"
	width="1186"
	height="605"
	srcset="/post/rabbitmq/assets/1682392854308_hu2c9a4676fed220084d7a5e7612f29737_60559_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682392854308_hu2c9a4676fed220084d7a5e7612f29737_60559_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682392854308"
	
	
		class="gallery-image" 
		data-flex-grow="196"
		data-flex-basis="470px"
	
></p>
<p>4.Ê∑ªÂä†‰∏Ä‰∏™Êñ∞ÁöÑÁî®Êà∑</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂàõÂª∫Ë¥¶Âè∑</span> 
</span></span><span style="display:flex;"><span>rabbitmqctl add_user admin admin 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ËÆæÁΩÆÁî®Êà∑ËßíËâ≤</span> 
</span></span><span style="display:flex;"><span>rabbitmqctl set_user_tags admin administrator 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ËÆæÁΩÆÁî®Êà∑ÊùÉÈôê</span> 
</span></span><span style="display:flex;"><span>set_permissions <span style="color:#f92672">[-</span>p <span style="color:#f92672">&lt;</span>vhostpath<span style="color:#f92672">&gt;]</span> <span style="color:#f92672">&lt;</span>user<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&lt;</span>conf<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&lt;</span>write<span style="color:#f92672">&gt;</span> <span style="color:#f92672">&lt;</span>read<span style="color:#f92672">&gt;</span> 
</span></span><span style="display:flex;"><span>rabbitmqctl set_permissions <span style="color:#f92672">-</span>p <span style="color:#e6db74">&#34;/&#34;</span> admin <span style="color:#e6db74">&#34;.*&#34;</span> <span style="color:#e6db74">&#34;.*&#34;</span> <span style="color:#e6db74">&#34;.*&#34;</span> 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Áî®Êà∑</span> user_admin <span style="color:#960050;background-color:#1e0010">ÂÖ∑Êúâ</span><span style="color:#f92672">/</span>vhost1 <span style="color:#960050;background-color:#1e0010">Ëøô‰∏™</span> virtual host <span style="color:#960050;background-color:#1e0010">‰∏≠ÊâÄÊúâËµÑÊ∫êÁöÑÈÖçÁΩÆ„ÄÅÂÜô„ÄÅËØªÊùÉÈôê</span> 
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂΩìÂâçÁî®Êà∑ÂíåËßíËâ≤</span> 
</span></span><span style="display:flex;"><span>rabbitmqctl list_users 
</span></span></code></pre></div><h3 id="5ÂÜçÊ¨°Âà©Áî®-admin-Áî®Êà∑ÁôªÂΩï">5.ÂÜçÊ¨°Âà©Áî® admin Áî®Êà∑ÁôªÂΩï</h3>
<p><img src="/post/rabbitmq/assets/1682393025178.png"
	width="1070"
	height="218"
	srcset="/post/rabbitmq/assets/1682393025178_hu48363e5b3551445181e3e5847367b723_88179_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682393025178_hu48363e5b3551445181e3e5847367b723_88179_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682393025178"
	
	
		class="gallery-image" 
		data-flex-grow="490"
		data-flex-basis="1177px"
	
></p>
<h3 id="6ÈáçÁΩÆÂëΩ‰ª§">6.ÈáçÁΩÆÂëΩ‰ª§</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂÖ≥Èó≠Â∫îÁî®ÁöÑÂëΩ‰ª§‰∏∫</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rabbitmqctl stop_app 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">Ê∏ÖÈô§ÁöÑÂëΩ‰ª§‰∏∫</span>rabbitmqctl reset 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÈáçÊñ∞ÂêØÂä®ÂëΩ‰ª§‰∏∫</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>rabbitmqctl start_app
</span></span></code></pre></div><h2 id="‰∏ârabbitmqÂÖ•Èó®">‰∏â.RabbitMQÂÖ•Èó®</h2>
<p><img src="/post/rabbitmq/assets/1682393096528.png"
	width="850"
	height="201"
	srcset="/post/rabbitmq/assets/1682393096528_hu668ccca82db932edc6d31336c13c6b1b_55655_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682393096528_hu668ccca82db932edc6d31336c13c6b1b_55655_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682393096528"
	
	
		class="gallery-image" 
		data-flex-grow="422"
		data-flex-basis="1014px"
	
></p>
<h3 id="31-ÁéØÂ¢ÉÂáÜÂ§á">3.1 ÁéØÂ¢ÉÂáÜÂ§á</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!--ÊåáÂÆö jdk ÁºñËØëÁâàÊú¨--&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;build&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;plugins&gt;</span> 
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;plugin&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;groupId&gt;</span>org.apache.maven.plugins<span style="color:#f92672">&lt;/groupId&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;artifactId&gt;</span>maven-compiler-plugin<span style="color:#f92672">&lt;/artifactId&gt;</span> 
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;configuration&gt;</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;source&gt;</span>8<span style="color:#f92672">&lt;/source&gt;</span> 
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">&lt;target&gt;</span>8<span style="color:#f92672">&lt;/target&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">&lt;/configuration&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/plugins&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/build&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">&lt;!--rabbitmq ‰æùËµñÂÆ¢Êà∑Á´Ø--&gt;</span> 
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>com.rabbitmq<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>amqp-client<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;version&gt;</span>5.14.2<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>	 <span style="color:#75715e">&lt;!--IO Â∑•ÂÖ∑ÂåÖ--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span> 
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">&lt;groupId&gt;</span>commons-io<span style="color:#f92672">&lt;/groupId&gt;</span> 
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">&lt;artifactId&gt;</span>commons-io<span style="color:#f92672">&lt;/artifactId&gt;</span> 
</span></span><span style="display:flex;"><span>    	<span style="color:#f92672">&lt;version&gt;</span>2.6<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependencies&gt;</span>
</span></span></code></pre></div><h3 id="32-Ê∂àÊÅØÁîü‰∫ßËÄÖ">3.2 Ê∂àÊÅØÁîü‰∫ßËÄÖ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.zhyp.rabbitmq<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Connection<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.ConnectionFactory<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Producer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> String QUEUE_NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//ÂàõÂª∫‰∏Ä‰∏™ËøûÊé•Â∑•ÂéÇ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        ConnectionFactory factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConnectionFactory<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setHost</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;182.92.234.71&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setUsername</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;admin&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPassword</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;123&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPort</span><span style="color:#f92672">(</span><span style="color:#ae81ff">5672</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//channel ÂÆûÁé∞‰∫ÜËá™Âä® close Êé•Âè£ Ëá™Âä®ÂÖ≥Èó≠ ‰∏çÈúÄË¶ÅÊòæÁ§∫ÂÖ≥Èó≠
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">try</span> <span style="color:#f92672">(</span>Connection connection <span style="color:#f92672">=</span> factory<span style="color:#f92672">.</span><span style="color:#a6e22e">newConnection</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>             Channel channel <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createChannel</span><span style="color:#f92672">()){</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * ÁîüÊàê‰∏Ä‰∏™ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 1.ÈòüÂàóÂêçÁß∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 2.ÈòüÂàóÈáåÈù¢ÁöÑÊ∂àÊÅØÊòØÂê¶ÊåÅ‰πÖÂåñ ÈªòËÆ§Ê∂àÊÅØÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 3.ËØ•ÈòüÂàóÊòØÂê¶Âè™‰æõ‰∏Ä‰∏™Ê∂àË¥πËÄÖËøõË°åÊ∂àË¥π ÊòØÂê¶ËøõË°åÂÖ±‰∫´ true ÂèØ‰ª•Â§ö‰∏™Ê∂àË¥πËÄÖÊ∂àË¥π
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 4.ÊòØÂê¶Ëá™Âä®Âà†Èô§ ÊúÄÂêé‰∏Ä‰∏™Ê∂àË¥πËÄÖÁ´ØÂºÄËøûÊé•‰ª•Âêé ËØ•ÈòüÂàóÊòØÂê¶Ëá™Âä®Âà†Èô§ true Ëá™Âä®Âà†Èô§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 5.ÂÖ∂‰ªñÂèÇÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             */</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>QUEUE_NAME<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            String message <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello world&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * ÂèëÈÄÅ‰∏Ä‰∏™Ê∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 1.ÂèëÈÄÅÂà∞ÈÇ£‰∏™‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 2.Ë∑ØÁî±ÁöÑ key ÊòØÂì™‰∏™
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 3.ÂÖ∂‰ªñÁöÑÂèÇÊï∞‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             * 4.ÂèëÈÄÅÊ∂àÊÅØÁöÑÊ∂àÊÅØ‰Ωì
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">             */</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">,</span> QUEUE_NAME<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Ê∂àÊÅØÂèëÈÄÅÂÆåÊØï&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="33-Ê∂àÊÅØÊ∂àË¥πËÄÖ">3.3 Ê∂àÊÅØÊ∂àË¥πËÄÖ</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">static</span> String QUEUE_NAME <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;hello&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        ConnectionFactory factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConnectionFactory<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setHost</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;182.92.234.71&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setUsername</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;admin&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPassword</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;123&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPort</span><span style="color:#f92672">(</span><span style="color:#ae81ff">5672</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Connection connection <span style="color:#f92672">=</span> factory<span style="color:#f92672">.</span><span style="color:#a6e22e">newConnection</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        Channel channel <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Á≠âÂæÖÊé•Êî∂Ê∂àÊÅØ.........&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Êé®ÈÄÅÁöÑÊ∂àÊÅØÂ¶Ç‰ΩïËøõË°åÊ∂àË¥πÁöÑÊé•Âè£ÂõûË∞É
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        DeliverCallback deliverCallback <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">,</span> delivery<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            String message <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>delivery<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span>message<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//ÂèñÊ∂àÊ∂àË¥πÁöÑ‰∏Ä‰∏™ÂõûË∞ÉÊé•Âè£ Â¶ÇÂú®Ê∂àË¥πÁöÑÊó∂ÂÄôÈòüÂàóË¢´Âà†Èô§Êéâ‰∫Ü
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        CancelCallback cancelCallback <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Ê∂àÊÅØÊ∂àË¥πË¢´‰∏≠Êñ≠&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * Ê∂àË¥πËÄÖÊ∂àË¥πÊ∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 1.Ê∂àË¥πÂì™‰∏™ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 2.Ê∂àË¥πÊàêÂäü‰πãÂêéÊòØÂê¶Ë¶ÅËá™Âä®Â∫îÁ≠î true ‰ª£Ë°®Ëá™Âä®Â∫îÁ≠î false ÊâãÂä®Â∫îÁ≠î
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 3.Ê∂àË¥πËÄÖÊî∂Âà∞MQÊ∂àÊÅØÁöÑÂõûË∞É
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 4.Ê∂àË¥πËÄÖÊú™ÊàêÂäüÊ∂àË¥πÁöÑÂõûË∞É
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         */</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span>QUEUE_NAME<span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> deliverCallback<span style="color:#f92672">,</span> cancelCallback<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>ÊäΩÂèñÂ∑•ÂÖ∑Á±ª</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RabbitUtils</span><span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> channel <span style="color:#a6e22e">getChannel</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>        ConnectionFactory factory <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> ConnectionFactory<span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setHost</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;182.92.234.71&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setUsername</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;admin&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPassword</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;123&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        factory<span style="color:#f92672">.</span><span style="color:#a6e22e">setPort</span><span style="color:#f92672">(</span><span style="color:#ae81ff">5672</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        Connection connection <span style="color:#f92672">=</span> factory<span style="color:#f92672">.</span><span style="color:#a6e22e">newConnection</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        Channel channel <span style="color:#f92672">=</span> connection<span style="color:#f92672">.</span><span style="color:#a6e22e">createChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="34-Ê∂àÊÅØÂ∫îÁ≠îÈù¢ËØïÈ¢òÂ¶Ç‰Ωï‰øùËØÅÊ∂àË¥πËÄÖÊ∂àÊÅØ‰∏ç‰∏¢Â§±">==3.4 Ê∂àÊÅØÂ∫îÁ≠î(Èù¢ËØïÈ¢ò:Â¶Ç‰Ωï‰øùËØÅÊ∂àË¥πËÄÖÊ∂àÊÅØ‰∏ç‰∏¢Â§±)==</h3>
<p><code>RabbitMQ ‰∏ÄÊó¶ÂêëÊ∂àË¥πËÄÖ‰º†ÈÄí‰∫Ü‰∏ÄÊù°Ê∂àÊÅØÔºå‰æøÁ´ãÂç≥Â∞ÜËØ•Ê∂à ÊÅØÊ†áËÆ∞‰∏∫Âà†Èô§„ÄÇ</code>Âú®ËøôÁßçÊÉÖÂÜµ‰∏ãÔºåÁ™ÅÁÑ∂Êúâ‰∏™Ê∂àË¥πËÄÖÊåÇÊéâ‰∫ÜÔºåÊàë‰ª¨Â∞Ü‰∏¢Â§±Ê≠£Âú®Â§ÑÁêÜÁöÑÊ∂àÊÅØ„ÄÇ‰ª•ÂèäÂêéÁª≠ ÂèëÈÄÅÁªôËØ•Ê∂àË¥πËøôÁöÑÊ∂àÊÅØÔºåÂõ†‰∏∫ÂÆÉÊó†Ê≥ïÊé•Êî∂Âà∞„ÄÇ ‰∏∫‰∫Ü‰øùËØÅÊ∂àÊÅØÂú®ÂèëÈÄÅËøáÁ®ã‰∏≠‰∏ç‰∏¢Â§±Ôºårabbitmq ÂºïÂÖ•Ê∂àÊÅØÂ∫îÁ≠îÊú∫Âà∂ÔºåÊ∂àÊÅØÂ∫îÁ≠îÂ∞±ÊòØ:Ê∂àË¥πËÄÖÂú®Êé•Êî∂ Âà∞Ê∂àÊÅØÂπ∂‰∏îÂ§ÑÁêÜËØ•Ê∂àÊÅØ‰πãÂêéÔºåÂëäËØâ rabbitmq ÂÆÉÂ∑≤ÁªèÂ§ÑÁêÜ‰∫ÜÔºårabbitmq ÂèØ‰ª•ÊääËØ•Ê∂àÊÅØÂà†Èô§‰∫Ü„ÄÇ</p>
<p><strong>Ëá™Âä®Â∫îÁ≠î</strong></p>
<p>Ê∂àÊÅØÂèëÈÄÅÂêéÁ´ãÂç≥Ë¢´ËÆ§‰∏∫Â∑≤Áªè‰º†ÈÄÅÊàêÂäüÔºåËøôÁßçÊ®°ÂºèÈúÄË¶ÅÂú®È´òÂêûÂêêÈáèÂíåÊï∞ÊçÆ‰º†ËæìÂÆâÂÖ®ÊÄßÊñπÈù¢ÂÅöÊùÉ Ë°°,Âõ†‰∏∫ËøôÁßçÊ®°ÂºèÂ¶ÇÊûúÊ∂àÊÅØÂú®Êé•Êî∂Âà∞‰πãÂâçÔºåÊ∂àË¥πËÄÖÈÇ£ËæπÂá∫Áé∞ËøûÊé•ÊàñËÄÖ channel ÂÖ≥Èó≠ÔºåÈÇ£‰πàÊ∂àÊÅØÂ∞±‰∏¢Â§± ‰∫Ü,ÂΩìÁÑ∂Âè¶‰∏ÄÊñπÈù¢ËøôÁßçÊ®°ÂºèÊ∂àË¥πËÄÖÈÇ£ËæπÂèØ‰ª•‰º†ÈÄíËøáËΩΩÁöÑÊ∂àÊÅØÔºåÊ≤°ÊúâÂØπ‰º†ÈÄíÁöÑÊ∂àÊÅØÊï∞ÈáèËøõË°åÈôêÂà∂ÔºåÂΩì ÁÑ∂ËøôÊ†∑ÊúâÂèØËÉΩ‰ΩøÂæóÊ∂àË¥πËÄÖËøôËæπÁî±‰∫éÊé•Êî∂Â§™Â§öËøòÊù•‰∏çÂèäÂ§ÑÁêÜÁöÑÊ∂àÊÅØÔºåÂØºËá¥Ëøô‰∫õÊ∂àÊÅØÁöÑÁßØÂéãÔºåÊúÄÁªà‰Ωø ÂæóÂÜÖÂ≠òËÄóÂ∞ΩÔºåÊúÄÁªàËøô‰∫õÊ∂àË¥πËÄÖÁ∫øÁ®ãË¢´Êìç‰ΩúÁ≥ªÁªüÊùÄÊ≠ªÔºåÊâÄ‰ª•ËøôÁßçÊ®°Âºè‰ªÖÈÄÇÁî®Âú®Ê∂àË¥πËÄÖÂèØ‰ª•È´òÊïàÂπ∂‰ª• ÊüêÁßçÈÄüÁéáËÉΩÂ§üÂ§ÑÁêÜËøô‰∫õÊ∂àÊÅØÁöÑÊÉÖÂÜµ‰∏ã‰ΩøÁî®„ÄÇ</p>
<p><strong>ÊâãÂä®Ê∂àÊÅØÂ∫îÁ≠îÁöÑÊñπÊ≥ï</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#ae81ff">1.</span>channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicAck</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">Áî®‰∫éËÇØÂÆöÁ°ÆËÆ§</span><span style="color:#f92672">)</span>  
</span></span><span style="display:flex;"><span> RabbitMQ <span style="color:#960050;background-color:#1e0010">Â∑≤Áü•ÈÅìËØ•Ê∂àÊÅØÂπ∂‰∏îÊàêÂäüÁöÑÂ§ÑÁêÜÊ∂àÊÅØÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰∏¢ÂºÉ‰∫Ü</span> 
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">2.</span>channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicNack</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">Áî®‰∫éÂê¶ÂÆöÁ°ÆËÆ§</span><span style="color:#f92672">)</span>  
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">3.</span>channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicReject</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">Áî®‰∫éÂê¶ÂÆöÁ°ÆËÆ§</span><span style="color:#f92672">)</span>  
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">‰∏é</span> channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicNack</span> <span style="color:#960050;background-color:#1e0010">Áõ∏ÊØîÂ∞ë‰∏Ä‰∏™ÂèÇÊï∞</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">ÊâπÈáèÂ∫îÁ≠î</span><span style="color:#f92672">)</span> <span style="color:#960050;background-color:#1e0010">‰∏çÂ§ÑÁêÜËØ•Ê∂àÊÅØ‰∫ÜÁõ¥Êé•ÊãíÁªùÔºåÂèØ‰ª•Â∞ÜÂÖ∂‰∏¢ÂºÉ‰∫Ü</span> 
</span></span></code></pre></div><p><strong>Multiple ÊâãÂä®Â∫îÁ≠î</strong></p>
<p>‚Äã	ÊâãÂä®Â∫îÁ≠îÁöÑÂ•ΩÂ§ÑÊòØÂèØ‰ª•ÊâπÈáèÂ∫îÁ≠îÂπ∂‰∏îÂáèÂ∞ëÁΩëÁªúÊã•Â†µ</p>
<p><img src="/post/rabbitmq/assets/1682394301757.png"
	width="1545"
	height="314"
	srcset="/post/rabbitmq/assets/1682394301757_hu32d5cf12e6ce3a71e9ac9bf5828e014b_275840_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682394301757_hu32d5cf12e6ce3a71e9ac9bf5828e014b_275840_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682394301757"
	
	
		class="gallery-image" 
		data-flex-grow="492"
		data-flex-basis="1180px"
	
></p>
<ul>
<li>
<p>multiple ÁöÑ true Âíå false ‰ª£Ë°®‰∏çÂêåÊÑèÊÄù</p>
<ul>
<li>
<p>true ‰ª£Ë°®ÊâπÈáèÂ∫îÁ≠î channel ‰∏äÊú™Â∫îÁ≠îÁöÑÊ∂àÊÅØ</p>
<pre><code>ÊØîÂ¶ÇËØ¥ channel ‰∏äÊúâ‰º†ÈÄÅ tag ÁöÑÊ∂àÊÅØ 5,6,7,8 ÂΩìÂâç tag ÊòØ8 ÈÇ£‰πàÊ≠§Êó∂ 5-8 ÁöÑËøô‰∫õËøòÊú™Â∫îÁ≠îÁöÑÊ∂àÊÅØÈÉΩ‰ºöË¢´Á°ÆËÆ§Êî∂Âà∞Ê∂àÊÅØÂ∫îÁ≠î 
</code></pre>
</li>
</ul>
</li>
<li>
<ul>
<li>false Âêå‰∏äÈù¢Áõ∏ÊØî</li>
</ul>
</li>
</ul>
<p>‚Äã		 Âè™‰ºöÂ∫îÁ≠î tag=8 ÁöÑÊ∂àÊÅØ 5,6,7 Ëøô‰∏â‰∏™Ê∂àÊÅØ‰æùÁÑ∂‰∏ç‰ºöË¢´Á°ÆËÆ§Êî∂Âà∞Ê∂àÊÅØÂ∫îÁ≠î</p>
<p><img src="/post/rabbitmq/assets/1682394422798.png"
	width="1191"
	height="427"
	srcset="/post/rabbitmq/assets/1682394422798_hub043f53f7085fcbe185e4b5e710aaf3a_66300_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682394422798_hub043f53f7085fcbe185e4b5e710aaf3a_66300_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682394422798"
	
	
		class="gallery-image" 
		data-flex-grow="278"
		data-flex-basis="669px"
	
></p>
<p><img src="/post/rabbitmq/assets/1682394435473.png"
	width="1188"
	height="463"
	srcset="/post/rabbitmq/assets/1682394435473_hu3899bb4f26daca339bf085272246f0d0_85504_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682394435473_hu3899bb4f26daca339bf085272246f0d0_85504_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682394435473"
	
	
		class="gallery-image" 
		data-flex-grow="256"
		data-flex-basis="615px"
	
></p>
<p><img src="/post/rabbitmq/assets/1682394448939.png"
	width="1195"
	height="468"
	srcset="/post/rabbitmq/assets/1682394448939_hu5c187d320077591c8428afe24be48940_85630_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682394448939_hu5c187d320077591c8428afe24be48940_85630_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682394448939"
	
	
		class="gallery-image" 
		data-flex-grow="255"
		data-flex-basis="612px"
	
></p>
<h3 id="35-Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü">3.5 Ê∂àÊÅØËá™Âä®ÈáçÊñ∞ÂÖ•Èòü</h3>
<p>Â¶ÇÊûúÊ∂àË¥πËÄÖÁî±‰∫éÊüê‰∫õÂéüÂõ†Â§±ÂéªËøûÊé•(ÂÖ∂ÈÄöÈÅìÂ∑≤ÂÖ≥Èó≠ÔºåËøûÊé•Â∑≤ÂÖ≥Èó≠Êàñ TCP ËøûÊé•‰∏¢Â§±)ÔºåÂØºËá¥Ê∂àÊÅØ Êú™ÂèëÈÄÅ ACK Á°ÆËÆ§ÔºåRabbitMQ Â∞Ü‰∫ÜËß£Âà∞Ê∂àÊÅØÊú™ÂÆåÂÖ®Â§ÑÁêÜÔºåÂπ∂Â∞ÜÂØπÂÖ∂ÈáçÊñ∞ÊéíÈòü„ÄÇÂ¶ÇÊûúÊ≠§Êó∂ÂÖ∂‰ªñÊ∂àË¥πËÄÖ ÂèØ‰ª•Â§ÑÁêÜÔºåÂÆÉÂ∞ÜÂæàÂø´Â∞ÜÂÖ∂ÈáçÊñ∞ÂàÜÂèëÁªôÂè¶‰∏Ä‰∏™Ê∂àË¥πËÄÖ„ÄÇËøôÊ†∑ÔºåÂç≥‰ΩøÊüê‰∏™Ê∂àË¥πËÄÖÂÅ∂Â∞îÊ≠ª‰∫°Ôºå‰πüÂèØ‰ª•Á°Æ ‰øù‰∏ç‰ºö‰∏¢Â§±‰ªª‰ΩïÊ∂àÊÅØ</p>
<p><img src="/post/rabbitmq/assets/1682395939273.png"
	width="1495"
	height="644"
	srcset="/post/rabbitmq/assets/1682395939273_huc13478a89d3b245f7e549a30897be1ee_189222_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682395939273_huc13478a89d3b245f7e549a30897be1ee_189222_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682395939273"
	
	
		class="gallery-image" 
		data-flex-grow="232"
		data-flex-basis="557px"
	
></p>
<h3 id="36-Ê∂àÊÅØÊâãÂä®Â∫îÁ≠î‰ª£Á†Å">3.6 Ê∂àÊÅØÊâãÂä®Â∫îÁ≠î‰ª£Á†Å</h3>
<p>ÈªòËÆ§Ê∂àÊÅØÈááÁî®ÁöÑÊòØËá™Âä®Â∫îÁ≠îÔºåÊâÄ‰ª•Êàë‰ª¨Ë¶ÅÊÉ≥ÂÆûÁé∞Ê∂àÊÅØÊ∂àË¥πËøáÁ®ã‰∏≠‰∏ç‰∏¢Â§±ÔºåÈúÄË¶ÅÊääËá™Âä®Â∫îÁ≠îÊîπ</p>
<p>‰∏∫ÊâãÂä®Â∫îÁ≠îÔºåÊ∂àË¥πËÄÖÂú®‰∏äÈù¢‰ª£Á†ÅÁöÑÂü∫Á°Ä‰∏äÂ¢ûÂä†‰∏ãÈù¢ÁîªÁ∫¢Ëâ≤ÈÉ®ÂàÜ‰ª£Á†Å„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/1682396032934.png"
	width="1526"
	height="538"
	srcset="/post/rabbitmq/assets/1682396032934_hu6ee3022a2628804c106df487d12f8243_843420_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396032934_hu6ee3022a2628804c106df487d12f8243_843420_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396032934"
	
	
		class="gallery-image" 
		data-flex-grow="283"
		data-flex-basis="680px"
	
></p>
<p><strong>Ê∂àÊÅØÁîü‰∫ßËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.consumer_ack<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * MQÊ∂àÊÅØÁîü‰∫ßËÄÖ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂèëÈÄÅ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//2.1 ÂàõÂª∫ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * String queue,  ÈòüÂàóÂêçÁß∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean durable, true ÈòüÂàóÊåÅ‰πÖÂåñ false ÈòüÂàóÂú®brokerÈáçÂêØÂà†Èô§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean exclusive,  ËØ•ÈòüÂàóÊòØÂê¶‰∏∫Êüê‰∏™Ê∂àË¥πËÄÖ‰∏ìÁî®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean autoDelete, ÂΩìÊ≤°ÊúâÊ∂àË¥πËÄÖËøûÊé•Ëøô‰∏™ÈòüÂàóÊó∂ ÊòØÂê¶Ëá™Âä®Âà†Èô§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * Map&lt;String, Object&gt; arguments  ÂÖ∂‰ªñÈÖçÁΩÆÂèÇÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         */</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queue_name&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.2 ÂèëÈÄÅÊ∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1000</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;queue_name&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,(</span><span style="color:#e6db74">&#34;Hello Rabbit!&#34;</span> <span style="color:#f92672">+</span> i<span style="color:#f92672">).</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèëÊ∂àÊÅØÊàêÂäü...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>Ê∂àÊÅØÊ∂àË¥πËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.consumer_ack<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.CancelCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.DeliverCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * Ê∂àÊÅØÊ∂àË¥πËÄÖ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">1000</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ËØªÂèñmq‰∏≠Ê∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        DeliverCallback deliverCallback <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">,</span>message<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèñÂà∞Ê∂àÊÅØ‰∫Ü: &#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">()));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//4.Ê∂àË¥πÂÆåÊØïÂêéÂøÖÈ°ªÊâãÂä®Â∫îÁ≠î,ÈááÁî®ÁöÑÂçï‰∏™Ê∂àÊÅØÂ∫îÁ≠î
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            		channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicAck</span><span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getEnvelope</span><span style="color:#f92672">().</span><span style="color:#a6e22e">getDeliveryTag</span><span style="color:#f92672">(),</span><span style="color:#66d9ef">false</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            count<span style="color:#f92672">--;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>count <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                <span style="color:#66d9ef">long</span> end <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ËÄóÊó∂:&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>end<span style="color:#f92672">-</span>start<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        CancelCallback cancelCallback <span style="color:#f92672">=</span> consumerTag <span style="color:#f92672">-&gt;</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Ê∂àÊÅØÂèñÊ∂à‰∫Ü: &#34;</span> <span style="color:#f92672">+</span> consumerTag<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.ÊääËá™Âä®Â∫îÁ≠îÊîπ‰∏∫ÊâãÂä®Â∫îÁ≠î
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        start <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queue_name&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> deliverCallback<span style="color:#f92672">,</span> cancelCallback<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="37-rabbitmq-ÊåÅ‰πÖÂåñ">3.7 RabbitMQ ÊåÅ‰πÖÂåñ</h3>
<h4 id="371-Ê¶ÇÂøµ">3.7.1 Ê¶ÇÂøµ</h4>
<p>ÂàöÂàöÊàë‰ª¨Â∑≤ÁªèÁúãÂà∞‰∫ÜÂ¶Ç‰ΩïÂ§ÑÁêÜ‰ªªÂä°‰∏ç‰∏¢Â§±ÁöÑÊÉÖÂÜµÔºå‰ΩÜÊòØÂ¶Ç‰Ωï‰øùÈöúÂΩì RabbitMQ ÊúçÂä°ÂÅúÊéâ‰ª•ÂêéÊ∂à ÊÅØÁîü‰∫ßËÄÖÂèëÈÄÅËøáÊù•ÁöÑÊ∂àÊÅØ‰∏ç‰∏¢Â§±„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ã RabbitMQ ÈÄÄÂá∫ÊàñÁî±‰∫éÊüêÁßçÂéüÂõ†Â¥©Ê∫ÉÊó∂ÔºåÂÆÉÂøΩËßÜÈòüÂàó ÂíåÊ∂àÊÅØÔºåÈô§ÈùûÂëäÁü•ÂÆÉ‰∏çË¶ÅËøôÊ†∑ÂÅö„ÄÇÁ°Æ‰øùÊ∂àÊÅØ‰∏ç‰ºö‰∏¢Â§±ÈúÄË¶ÅÂÅö‰∏§‰ª∂‰∫ãÔºöÊàë‰ª¨ÈúÄË¶ÅÂ∞ÜÈòüÂàóÂíåÊ∂àÊÅØÈÉΩÊ†á ËÆ∞‰∏∫ÊåÅ‰πÖÂåñ„ÄÇ</p>
<h4 id="372-ÈòüÂàóÂ¶Ç‰ΩïÂÆûÁé∞ÊåÅ‰πÖÂåñ">3.7.2 ÈòüÂàóÂ¶Ç‰ΩïÂÆûÁé∞ÊåÅ‰πÖÂåñ</h4>
<p>‰πãÂâçÊàë‰ª¨ÂàõÂª∫ÁöÑÈòüÂàóÈÉΩÊòØÈùûÊåÅ‰πÖÂåñÁöÑÔºårabbitmq Â¶ÇÊûúÈáçÂêØÁöÑÂåñÔºåËØ•ÈòüÂàóÂ∞±‰ºöË¢´Âà†Èô§ÊéâÔºåÂ¶ÇÊûú Ë¶ÅÈòüÂàóÂÆûÁé∞ÊåÅ‰πÖÂåñ ÈúÄË¶ÅÂú®Â£∞ÊòéÈòüÂàóÁöÑÊó∂ÂÄôÊää durable ÂèÇÊï∞ËÆæÁΩÆ‰∏∫ÊåÅ‰πÖÂåñ</p>
<p><img src="/post/rabbitmq/assets/1682396218835.png"
	width="1521"
	height="90"
	srcset="/post/rabbitmq/assets/1682396218835_hu637a713675c06e28240bc71aca69867d_129121_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396218835_hu637a713675c06e28240bc71aca69867d_129121_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396218835"
	
	
		class="gallery-image" 
		data-flex-grow="1690"
		data-flex-basis="4056px"
	
></p>
<p>‰ΩÜÊòØÈúÄË¶Å<strong>Ê≥®ÊÑè</strong>ÁöÑÂ∞±ÊòØÂ¶ÇÊûú‰πãÂâçÂ£∞ÊòéÁöÑÈòüÂàó‰∏çÊòØÊåÅ‰πÖÂåñÁöÑÔºåÈúÄË¶ÅÊääÂéüÂÖàÈòüÂàóÂÖàÂà†Èô§ÔºåÊàñËÄÖÈáçÊñ∞</p>
<p>ÂàõÂª∫‰∏Ä‰∏™ÊåÅ‰πÖÂåñÁöÑÈòüÂàóÔºå‰∏çÁÑ∂Â∞±‰ºöÂá∫Áé∞ÈîôËØØ .</p>
<p><img src="/post/rabbitmq/assets/1682396285121.png"
	width="1513"
	height="52"
	srcset="/post/rabbitmq/assets/1682396285121_hua049ad4104e54eeb2796ac0dbad7cee2_29479_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396285121_hua049ad4104e54eeb2796ac0dbad7cee2_29479_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396285121"
	
	
		class="gallery-image" 
		data-flex-grow="2909"
		data-flex-basis="6983px"
	
></p>
<p>Ëøô‰∏™Êó∂ÂÄôÂç≥‰ΩøÈáçÂêØ rabbitmq ÈòüÂàó‰πü‰æùÁÑ∂Â≠òÂú®</p>
<p><img src="/post/rabbitmq/assets/1682396294506.png"
	width="1516"
	height="365"
	srcset="/post/rabbitmq/assets/1682396294506_hu96a1bcb81d6e5a4c68796fc1bb898344_141804_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396294506_hu96a1bcb81d6e5a4c68796fc1bb898344_141804_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396294506"
	
	
		class="gallery-image" 
		data-flex-grow="415"
		data-flex-basis="996px"
	
></p>
<h4 id="373-Ê∂àÊÅØÂÆûÁé∞ÊåÅ‰πÖÂåñ">3.7.3 Ê∂àÊÅØÂÆûÁé∞ÊåÅ‰πÖÂåñ</h4>
<p>Ë¶ÅÊÉ≥ËÆ©Ê∂àÊÅØÂÆûÁé∞ÊåÅ‰πÖÂåñÈúÄË¶ÅÂú®Ê∂àÊÅØÁîü‰∫ßËÄÖ‰øÆÊîπ‰ª£Á†ÅÔºåMessageProperties.PERSISTENT_TEXT_PLAIN Ê∑ª Âä†Ëøô‰∏™Â±ûÊÄß„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/1682396362572.png"
	width="1800"
	height="212"
	srcset="/post/rabbitmq/assets/1682396362572_hu639edfbf8603e9d62e83e29868b1ded8_321239_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396362572_hu639edfbf8603e9d62e83e29868b1ded8_321239_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396362572"
	
	
		class="gallery-image" 
		data-flex-grow="849"
		data-flex-basis="2037px"
	
></p>
<h3 id="38-Áîü‰∫ßËÄÖÊ∂àÊÅØÂèëÂ∏ÉÁ°ÆËÆ§">3.8 Áîü‰∫ßËÄÖÊ∂àÊÅØÂèëÂ∏ÉÁ°ÆËÆ§</h3>
<h4 id="381-ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊñπÊ≥ï--ÂçïÊù°">3.8.1 ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊñπÊ≥ï  (ÂçïÊù°)</h4>
<p>ÂèëÂ∏ÉÁ°ÆËÆ§ÈªòËÆ§ÊòØÊ≤°ÊúâÂºÄÂêØÁöÑÔºåÂ¶ÇÊûúË¶ÅÂºÄÂêØÈúÄË¶ÅË∞ÉÁî®ÊñπÊ≥ï confirmSelectÔºåÊØèÂΩì‰Ω†Ë¶ÅÊÉ≥‰ΩøÁî®ÂèëÂ∏ÉÁ°ÆËÆ§ÔºåÈÉΩÈúÄË¶ÅÂú® channel ‰∏äË∞ÉÁî®ËØ•ÊñπÊ≥ï</p>
<p><img src="/post/rabbitmq/assets/1682396494539.png"
	width="1001"
	height="118"
	srcset="/post/rabbitmq/assets/1682396494539_hu598a03653bf69cbc731a852e1e57c636_67801_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682396494539_hu598a03653bf69cbc731a852e1e57c636_67801_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682396494539"
	
	
		class="gallery-image" 
		data-flex-grow="848"
		data-flex-basis="2035px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">publishMessageIndividually</span><span style="color:#f92672">()</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> <span style="color:#f92672">(</span>Channel channel <span style="color:#f92672">=</span> RabbitMqUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        String queueName <span style="color:#f92672">=</span> UUID<span style="color:#f92672">.</span><span style="color:#a6e22e">randomUUID</span><span style="color:#f92672">().</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queueName<span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">confirmSelect</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">long</span> begin <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> MESSAGE_COUNT<span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            String message <span style="color:#f92672">=</span> i <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">,</span> queueName<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e">//ÊúçÂä°Á´ØËøîÂõû false ÊàñË∂ÖÊó∂Êó∂Èó¥ÂÜÖÊú™ËøîÂõûÔºåÁîü‰∫ßËÄÖÂèØ‰ª•Ê∂àÊÅØÈáçÂèë
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>            <span style="color:#66d9ef">boolean</span> flag <span style="color:#f92672">=</span> channel<span style="color:#f92672">.</span><span style="color:#a6e22e">waitForConfirms</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>flag<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Ê∂àÊÅØÂèëÈÄÅÊàêÂäü&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">long</span> end <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèëÂ∏É&#34;</span> <span style="color:#f92672">+</span> MESSAGE_COUNT <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;‰∏™ÂçïÁã¨Á°ÆËÆ§Ê∂àÊÅØ,ËÄóÊó∂&#34;</span> <span style="color:#f92672">+</span> <span style="color:#f92672">(</span>end <span style="color:#f92672">-</span> begin<span style="color:#f92672">)</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>                           <span style="color:#e6db74">&#34;ms&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="382-ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊñπÊ≥ï--ÊâπÈáè">3.8.2 ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§ÁöÑÊñπÊ≥ï  (ÊâπÈáè)</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> * MQÊ∂àÊÅØÁîü‰∫ßËÄÖ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"> */</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//ÂºÄÂêØÂèëÂ∏ÉÁ°ÆËÆ§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">confirmSelect</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂèëÈÄÅ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//2.1 ÂàõÂª∫ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * String queue,  ÈòüÂàóÂêçÁß∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean durable, true ÈòüÂàóÊåÅ‰πÖÂåñ false ÈòüÂàóÂú®brokerÈáçÂêØÂà†Èô§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean exclusive,  ËØ•ÈòüÂàóÊòØÂê¶‰∏∫Êüê‰∏™Ê∂àË¥πËÄÖ‰∏ìÁî®
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * boolean autoDelete, ÂΩìÊ≤°ÊúâÊ∂àË¥πËÄÖËøûÊé•Ëøô‰∏™ÈòüÂàóÊó∂ ÊòØÂê¶Ëá™Âä®Âà†Èô§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * Map&lt;String, Object&gt; arguments  ÂÖ∂‰ªñÈÖçÁΩÆÂèÇÊï∞
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         */</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queue_name&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">false</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.2 ÂèëÈÄÅÊ∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">long</span> start <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">1000</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;queue_name&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,(</span><span style="color:#e6db74">&#34;Hello Rabbit!&#34;</span> <span style="color:#f92672">+</span> i<span style="color:#f92672">).</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.3 Êé•Êî∂brokerÁöÑÂèëÂ∏ÉÁ°ÆËÆ§
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">boolean</span> b <span style="color:#f92672">=</span> channel<span style="color:#f92672">.</span><span style="color:#a6e22e">waitForConfirms</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">long</span> end <span style="color:#f92672">=</span> System<span style="color:#f92672">.</span><span style="color:#a6e22e">currentTimeMillis</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> <span style="color:#f92672">(</span>b<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÊâπÈáèÂèëÊ∂àÊÅØÊàêÂäü...&#34;</span><span style="color:#f92672">+(</span>end<span style="color:#f92672">-</span>start<span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="39--‰∫§Êç¢Êú∫">3.9  ‰∫§Êç¢Êú∫</h3>
<p>RabbitMQ Ê∂àÊÅØ‰º†ÈÄíÊ®°ÂûãÁöÑÊ†∏ÂøÉÊÄùÊÉ≥ÊòØ: Áîü‰∫ßËÄÖÁîü‰∫ßÁöÑÊ∂àÊÅØ‰ªé‰∏ç‰ºöÁõ¥Êé•ÂèëÈÄÅÂà∞ÈòüÂàó„ÄÇÂÆûÈôÖ‰∏äÔºåÈÄöÂ∏∏Áîü‰∫ßËÄÖÁîöËá≥ÈÉΩ‰∏çÁü•ÈÅìËøô‰∫õÊ∂àÊÅØ‰º†ÈÄí‰º†ÈÄíÂà∞‰∫ÜÂì™‰∫õÈòüÂàó‰∏≠„ÄÇ Áõ∏ÂèçÔºåÁîü‰∫ßËÄÖÂè™ËÉΩÂ∞ÜÊ∂àÊÅØÂèëÈÄÅÂà∞<strong>‰∫§Êç¢Êú∫(exchange)</strong></p>
<p><img src="/post/rabbitmq/assets/1682397400218.png"
	width="928"
	height="368"
	srcset="/post/rabbitmq/assets/1682397400218_huefd370e44086d87467542a90b054e6cc_85832_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682397400218_huefd370e44086d87467542a90b054e6cc_85832_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682397400218"
	
	
		class="gallery-image" 
		data-flex-grow="252"
		data-flex-basis="605px"
	
></p>
<h4 id="390-ÁªëÂÆöbindings">3.9.0 ÁªëÂÆö(bindings)</h4>
<p><strong>binding</strong> ÂÖ∂ÂÆûÊòØ exchange Âíå queue ‰πãÈó¥ÁöÑÊ°•Ê¢ÅÔºåÂÆÉÂëäËØâÊàë‰ª¨ exchange ÂíåÈÇ£‰∏™Èòü ÂàóËøõË°å‰∫ÜÁªëÂÆöÂÖ≥Á≥ª„ÄÇÊØîÂ¶ÇËØ¥‰∏ãÈù¢ËøôÂº†ÂõæÂëäËØâÊàë‰ª¨ÁöÑÂ∞±ÊòØ X ‰∏é Q1 Âíå Q2 ËøõË°å‰∫ÜÁªëÂÆö</p>
<p><img src="/post/rabbitmq/assets/1682397615821.png"
	width="771"
	height="403"
	srcset="/post/rabbitmq/assets/1682397615821_hue1c97816a7d7edaeb7fffafab95acd03_90514_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682397615821_hue1c97816a7d7edaeb7fffafab95acd03_90514_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682397615821"
	
	
		class="gallery-image" 
		data-flex-grow="191"
		data-flex-basis="459px"
	
></p>
<h4 id="391-exchanges-ÁöÑÁ±ªÂûã">3.9.1 Exchanges ÁöÑÁ±ªÂûã</h4>
<p><strong>ÊÄªÂÖ±Êúâ‰ª•‰∏ãÁ±ªÂûãÔºö</strong></p>
<p>‚Äã	Áõ¥Êé•(direct), ‰∏ªÈ¢ò(topic) ,ÊâáÂá∫(fanout), Ê†áÈ¢ò(headers)</p>
<h4 id="392-fanout-exchange-ÊâáÂá∫‰∫§Êç¢Êú∫">3.9.2 Fanout exchange ÊâáÂá∫‰∫§Êç¢Êú∫</h4>
<p>Fanout ËøôÁßçÁ±ªÂûãÈùûÂ∏∏ÁÆÄÂçï„ÄÇÊ≠£Â¶Ç‰ªéÂêçÁß∞‰∏≠ÁåúÂà∞ÁöÑÈÇ£Ê†∑ÔºåÂÆÉÊòØÂ∞ÜÊé•Êî∂Âà∞ÁöÑÊâÄÊúâÊ∂àÊÅØÂπøÊí≠Âà∞ÂÆÉÁü•ÈÅìÁöÑ ÊâÄÊúâÈòüÂàó‰∏≠„ÄÇÁ≥ªÁªü‰∏≠ÈªòËÆ§Êúâ‰∫õ exchange Á±ªÂûã</p>
<p><img src="/post/rabbitmq/assets/1682397784720.png"
	width="1014"
	height="612"
	srcset="/post/rabbitmq/assets/1682397784720_hudb0d831617650b302b6e92b6ab75c24e_115321_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682397784720_hudb0d831617650b302b6e92b6ab75c24e_115321_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682397784720"
	
	
		class="gallery-image" 
		data-flex-grow="165"
		data-flex-basis="397px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>EXCHANGE_NAME<span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;fanout&#34;</span><span style="color:#f92672">);</span> <span style="color:#75715e">//Â£∞Êòé‰∫§Êç¢Êú∫‰∏∫fanout
</span></span></span></code></pre></div><p><strong>Áîü‰∫ßËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂèëÈÄÅ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>Consumer01<span style="color:#f92672">.</span><span style="color:#a6e22e">exchange_name</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;Hello Rabbit!&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UtF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>       System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèëÊ∂àÊÅØÊàêÂäü...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>Ê∂àË¥πËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.BuiltinExchangeType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.DeliverCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer01</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String exchange_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;fanout_exchange&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;queue_one&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;queue_two&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.Ëé∑ÂèñChannel
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂàõÂª∫‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>exchange_name<span style="color:#f92672">,</span> BuiltinExchangeType<span style="color:#f92672">.</span><span style="color:#a6e22e">FANOUT</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.ÂàõÂª∫ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.ÁªëÂÆö
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span><span style="color:#e6db74">&#34;&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//5.Ê∂àË¥π
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        DeliverCallback okCallBack <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">,</span> message<span style="color:#f92672">)-&gt;{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Êé•ÂèóÂà∞Ê∂àÊÅØÔºö&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">(),</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span>okCallBack<span style="color:#f92672">,(</span>consumerTag<span style="color:#f92672">)-&gt;{});</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="393-direct-exchange-direct‰∫§Êç¢Êú∫">3.9.3 Direct exchange Direct‰∫§Êç¢Êú∫</h4>
<p>Direct‰∫§Êç¢Êú∫Âè™‰ºöÂ∞ÜÂèëÈÄÅÂà∞ÊåáÂÆöÁöÑ routingKey ÈòüÂàó‰∏≠Âéª.</p>
<p><img src="/post/rabbitmq/assets/1682398063758.png"
	width="1135"
	height="401"
	srcset="/post/rabbitmq/assets/1682398063758_huc4d79e30573d0f53a91c1ba66e05f340_145712_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682398063758_huc4d79e30573d0f53a91c1ba66e05f340_145712_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682398063758"
	
	
		class="gallery-image" 
		data-flex-grow="283"
		data-flex-basis="679px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂèëÈÄÅ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">exchange_name</span><span style="color:#f92672">,</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">routing_key_1</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;ÁªôË∑ØÁî±OrangeÂèëÈÄÅÁöÑ‰ø°ÊÅØ&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">exchange_name</span><span style="color:#f92672">,</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">routing_key_2</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;ÁªôË∑ØÁî±blackÂèëÈÄÅÁöÑ‰ø°ÊÅØ&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">exchange_name</span><span style="color:#f92672">,</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">routing_key_3</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">,</span><span style="color:#e6db74">&#34;ÁªôË∑ØÁî±greenÂèëÈÄÅÁöÑ‰ø°ÊÅØ&#34;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèëÊ∂àÊÅØÊàêÂäü...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.exchange_direct<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.BuiltinExchangeType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.DeliverCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Delivery<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String exchange_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;X&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Q1&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Q2&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;orange&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;black&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;green&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.Ëé∑ÂèñChannel
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂàõÂª∫‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>exchange_name<span style="color:#f92672">,</span> BuiltinExchangeType<span style="color:#f92672">.</span><span style="color:#a6e22e">DIRECT</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.ÂàõÂª∫ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.ÁªëÂÆöÈòüÂàóÂíå‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_3<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//5.Ê∂àË¥πÊ∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        DeliverCallback okCallBack <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">,</span> message<span style="color:#f92672">)-&gt;{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;Êé•ÂèóÂà∞Ê∂àÊÅØÔºö&#34;</span> <span style="color:#f92672">+</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">(),</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Ê∂àË¥πËÄÖ1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span>okCallBack<span style="color:#f92672">,(</span>consumerTag<span style="color:#f92672">)-&gt;{});</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Ê∂àË¥πËÄÖ2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//channel.basicConsume(queue_name2,true,okCallBack,(consumerTag)-&gt;{});
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h4 id="394-topic-‰∏ªÈ¢ò‰∫§Êç¢Êú∫">3.9.4 Topic ‰∏ªÈ¢ò‰∫§Êç¢Êú∫</h4>
<p><strong>Topic ÁöÑË¶ÅÊ±Ç</strong></p>
<p>ÂèëÈÄÅÂà∞Á±ªÂûãÊòØ topic ‰∫§Êç¢Êú∫ÁöÑÊ∂àÊÅØÁöÑ routing_key ‰∏çËÉΩÈöèÊÑèÂÜôÔºåÂøÖÈ°ªÊª°Ë∂≥‰∏ÄÂÆöÁöÑË¶ÅÊ±ÇÔºåÂÆÉÂøÖÈ°ªÊòØ‰∏Ä‰∏™ÂçïËØçÂàóË°®Ôºå‰ª•<strong>ÁÇπÂè∑</strong>ÂàÜÈöîÂºÄ„ÄÇËøô‰∫õÂçïËØçÂèØ‰ª•ÊòØ‰ªªÊÑèÂçïËØçÔºåÊØîÂ¶ÇËØ¥Ôºö&ldquo;stock.usd.nyse&rdquo;, &ldquo;nyse.vmw&rdquo;, &ldquo;quick.orange.rabbit&rdquo;.ËøôÁßçÁ±ªÂûãÁöÑ„ÄÇÂΩìÁÑ∂Ëøô‰∏™ÂçïËØçÂàóË°®ÊúÄÂ§ö‰∏çËÉΩË∂ÖËøá 255 ‰∏™Â≠óËäÇ„ÄÇ</p>
<p>Âú®Ëøô‰∏™ËßÑÂàôÂàóË°®‰∏≠ÔºåÂÖ∂‰∏≠Êúâ‰∏§‰∏™ÊõøÊç¢Á¨¶ÊòØÂ§ßÂÆ∂ÈúÄË¶ÅÊ≥®ÊÑèÁöÑ</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">*(</span><span style="color:#960050;background-color:#1e0010">ÊòüÂè∑</span><span style="color:#f92672">)</span><span style="color:#960050;background-color:#1e0010">ÂèØ‰ª•‰ª£Êõø‰∏Ä‰∏™ÂçïËØç</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">#</span><span style="color:#f92672">(</span><span style="color:#960050;background-color:#1e0010">‰∫ïÂè∑</span><span style="color:#f92672">)</span><span style="color:#960050;background-color:#1e0010">ÂèØ‰ª•Êõø‰ª£Èõ∂‰∏™ÊàñÂ§ö‰∏™ÂçïËØç</span>
</span></span></code></pre></div><p><strong>Topic ÂåπÈÖçÊ°à‰æã</strong></p>
<p>‰∏ãÂõæÁªëÂÆöÂÖ≥Á≥ªÂ¶Ç‰∏ã</p>
<p>Q1&ndash;&gt;ÁªëÂÆöÁöÑÊòØ</p>
<p>‚Äã	‰∏≠Èó¥Â∏¶ orange Â∏¶ 3 ‰∏™ÂçïËØçÁöÑÂ≠óÁ¨¶‰∏≤(<em>.orange.</em>)</p>
<p>Q2&ndash;&gt;ÁªëÂÆöÁöÑÊòØ</p>
<p>‚Äã	ÊúÄÂêé‰∏Ä‰∏™ÂçïËØçÊòØ rabbit ÁöÑ 3 ‰∏™ÂçïËØç(<em>.</em>.rabbit)</p>
<p>‚Äã	Á¨¨‰∏Ä‰∏™ÂçïËØçÊòØ lazy ÁöÑÂ§ö‰∏™ÂçïËØç(lazy.#)</p>
<p><img src="/post/rabbitmq/assets/1682398342481.png"
	width="1348"
	height="456"
	srcset="/post/rabbitmq/assets/1682398342481_hu47aae37ca5704f4dc3ae1ef15f8e2562_200375_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682398342481_hu47aae37ca5704f4dc3ae1ef15f8e2562_200375_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682398342481"
	
	
		class="gallery-image" 
		data-flex-grow="295"
		data-flex-basis="709px"
	
></p>
<p><strong>‰∏äÂõæÊòØ‰∏Ä‰∏™ÈòüÂàóÁªëÂÆöÂÖ≥Á≥ªÂõæÔºåÊàë‰ª¨Êù•ÁúãÁúã‰ªñ‰ª¨‰πãÈó¥Êï∞ÊçÆÊé•Êî∂ÊÉÖÂÜµÊòØÊÄé‰πàÊ†∑ÁöÑ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>quick<span style="color:#f92672">.</span><span style="color:#a6e22e">orange</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rabbit</span> <span style="color:#960050;background-color:#1e0010">Ë¢´ÈòüÂàó</span> Q1Q2 <span style="color:#960050;background-color:#1e0010">Êé•Êî∂Âà∞</span> 
</span></span><span style="display:flex;"><span>lazy<span style="color:#f92672">.</span><span style="color:#a6e22e">orange</span><span style="color:#f92672">.</span><span style="color:#a6e22e">elephant</span> <span style="color:#960050;background-color:#1e0010">Ë¢´ÈòüÂàó</span> Q1Q2 <span style="color:#960050;background-color:#1e0010">Êé•Êî∂Âà∞</span>
</span></span><span style="display:flex;"><span>quick<span style="color:#f92672">.</span><span style="color:#a6e22e">orange</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fox</span> <span style="color:#960050;background-color:#1e0010">Ë¢´ÈòüÂàó</span> Q1 <span style="color:#960050;background-color:#1e0010">Êé•Êî∂Âà∞</span>
</span></span><span style="display:flex;"><span>lazy<span style="color:#f92672">.</span><span style="color:#a6e22e">brown</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fox</span> <span style="color:#960050;background-color:#1e0010">Ë¢´ÈòüÂàó</span> Q2 <span style="color:#960050;background-color:#1e0010">Êé•Êî∂Âà∞</span>
</span></span><span style="display:flex;"><span>lazy<span style="color:#f92672">.</span><span style="color:#a6e22e">pink</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rabbit</span> <span style="color:#960050;background-color:#1e0010">ËôΩÁÑ∂Êª°Ë∂≥‰∏§‰∏™ÁªëÂÆö‰ΩÜÂè™Ë¢´ÈòüÂàó</span> Q2 <span style="color:#960050;background-color:#1e0010">Êé•Êî∂‰∏ÄÊ¨°</span>
</span></span><span style="display:flex;"><span>quick<span style="color:#f92672">.</span><span style="color:#a6e22e">brown</span><span style="color:#f92672">.</span><span style="color:#a6e22e">fox</span> <span style="color:#960050;background-color:#1e0010">‰∏çÂåπÈÖç‰ªª‰ΩïÁªëÂÆö‰∏ç‰ºöË¢´‰ªª‰ΩïÈòüÂàóÊé•Êî∂Âà∞‰ºöË¢´‰∏¢ÂºÉ</span>
</span></span><span style="display:flex;"><span>quick<span style="color:#f92672">.</span><span style="color:#a6e22e">orange</span><span style="color:#f92672">.</span><span style="color:#a6e22e">male</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rabbit</span> <span style="color:#960050;background-color:#1e0010">ÊòØÂõõ‰∏™ÂçïËØç‰∏çÂåπÈÖç‰ªª‰ΩïÁªëÂÆö‰ºöË¢´‰∏¢ÂºÉ</span>
</span></span><span style="display:flex;"><span>lazy<span style="color:#f92672">.</span><span style="color:#a6e22e">orange</span><span style="color:#f92672">.</span><span style="color:#a6e22e">male</span><span style="color:#f92672">.</span><span style="color:#a6e22e">rabbit</span> <span style="color:#960050;background-color:#1e0010">ÊòØÂõõ‰∏™ÂçïËØç‰ΩÜÂåπÈÖç</span> Q2
</span></span></code></pre></div><p><strong>ÂΩìÈòüÂàóÁªëÂÆöÂÖ≥Á≥ªÊòØ‰∏ãÂàóËøôÁßçÊÉÖÂÜµÊó∂ÈúÄË¶ÅÂºïËµ∑Ê≥®ÊÑè</strong></p>
<p>ÂΩì‰∏Ä‰∏™ÈòüÂàóÁªëÂÆöÈîÆÊòØ#,ÈÇ£‰πàËøô‰∏™ÈòüÂàóÂ∞ÜÊé•Êî∂ÊâÄÊúâÊï∞ÊçÆÔºåÂ∞±ÊúâÁÇπÂÉè fanout ‰∫Ü</p>
<p>Â¶ÇÊûúÈòüÂàóÁªëÂÆöÈîÆÂΩì‰∏≠Ê≤°Êúâ#Âíå*Âá∫Áé∞ÔºåÈÇ£‰πàËØ•ÈòüÂàóÁªëÂÆöÁ±ªÂûãÂ∞±ÊòØ direct ‰∫Ü</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.exchange_topic<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.exchange_direct.Consumer1<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.HashMap<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Map<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂèëÈÄÅ‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        HashMap<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;quick.orange.rabbit&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ë¢´ÈòüÂàó Q1Q2 Êé•Êî∂Âà∞&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;lazy.orange.elephant&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ë¢´ÈòüÂàó Q1Q2 Êé•Êî∂Âà∞&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;quick.orange.fox&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ë¢´ÈòüÂàó Q1 Êé•Êî∂Âà∞&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;lazy.brown.fox&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ë¢´ÈòüÂàó Q2 Êé•Êî∂Âà∞&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;lazy.pink.rabbit&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;ËôΩÁÑ∂Êª°Ë∂≥‰∏§‰∏™ÁªëÂÆö‰ΩÜÂè™Ë¢´ÈòüÂàó Q2 Êé•Êî∂‰∏ÄÊ¨°&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;quick.brown.fox&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;‰∏çÂåπÈÖç‰ªª‰ΩïÁªëÂÆö‰∏ç‰ºöË¢´‰ªª‰ΩïÈòüÂàóÊé•Êî∂Âà∞‰ºöË¢´‰∏¢ÂºÉ&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;quick.orange.male.rabbit&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;ÊòØÂõõ‰∏™ÂçïËØç‰∏çÂåπÈÖç‰ªª‰ΩïÁªëÂÆö‰ºöË¢´‰∏¢ÂºÉ&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;lazy.orange.male.rabbit&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;ÊòØÂõõ‰∏™ÂçïËØç‰ΩÜÂåπÈÖç Q2&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>Map<span style="color:#f92672">.</span><span style="color:#a6e22e">Entry</span><span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> String<span style="color:#f92672">&gt;</span> entry <span style="color:#f92672">:</span> map<span style="color:#f92672">.</span><span style="color:#a6e22e">entrySet</span><span style="color:#f92672">())</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            String routing_key <span style="color:#f92672">=</span> entry<span style="color:#f92672">.</span><span style="color:#a6e22e">getKey</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            String body <span style="color:#f92672">=</span> entry<span style="color:#f92672">.</span><span style="color:#a6e22e">getValue</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>ConsumerOne<span style="color:#f92672">.</span><span style="color:#a6e22e">exchange_name</span><span style="color:#f92672">,</span> routing_key<span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> body<span style="color:#f92672">.</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂèëÊ∂àÊÅØÊàêÂäü...&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.exchange_topic<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.BuiltinExchangeType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.DeliverCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">ConsumerOne</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String exchange_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;X&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Q1&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String queue_name2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Q2&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_1 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;*.orange.*&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_2 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;*.*.rabbit&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String routing_key_3 <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;lazy.#&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.Ëé∑ÂèñChannel
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂàõÂª∫‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>exchange_name<span style="color:#f92672">,</span> BuiltinExchangeType<span style="color:#f92672">.</span><span style="color:#a6e22e">TOPIC</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.ÂàõÂª∫ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.ÁªëÂÆöÈòüÂàóÂíå‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_1<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_2<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>queue_name2<span style="color:#f92672">,</span>exchange_name<span style="color:#f92672">,</span>routing_key_3<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//5.Ê∂àË¥πÊ∂àÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        DeliverCallback okCallBack <span style="color:#f92672">=</span> <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">,</span> message<span style="color:#f92672">)-&gt;{</span>
</span></span><span style="display:flex;"><span>            System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">(),</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">};</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Ê∂àË¥πËÄÖ1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span>queue_name1<span style="color:#f92672">,</span><span style="color:#66d9ef">true</span><span style="color:#f92672">,</span>okCallBack<span style="color:#f92672">,(</span>consumerTag<span style="color:#f92672">)-&gt;{});</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//Ê∂àË¥πËÄÖ2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#75715e">//channel.basicConsume(queue_name2,true,okCallBack,(consumerTag)-&gt;{});
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h2 id="Âõõ-rabbitmqÂÖ∂‰ªñ">Âõõ RabbitMQÂÖ∂‰ªñ</h2>
<h3 id="41-Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ">4.1 Ê≠ª‰ø°ÁöÑÊ¶ÇÂøµ</h3>
<p><strong>Ê≠ª‰ø°</strong></p>
<p>È°æÂêçÊÄù‰πâÂ∞±ÊòØÊó†Ê≥ïË¢´Ê∂àË¥πÁöÑÊ∂àÊÅØÔºåÂ≠óÈù¢ÊÑèÊÄùÂèØ‰ª•ËøôÊ†∑ÁêÜ Ëß£Ôºå‰∏ÄËà¨Êù•ËØ¥Ôºåproducer Â∞ÜÊ∂àÊÅØÊäïÈÄíÂà∞ broker ÊàñËÄÖÁõ¥Êé•Âà∞queue Èáå‰∫ÜÔºåconsumer ‰ªé queue ÂèñÂá∫Ê∂àÊÅØ ËøõË°åÊ∂àË¥πÔºå‰ΩÜÊüê‰∫õÊó∂ÂÄôÁî±‰∫éÁâπÂÆöÁöÑÂéüÂõ†ÂØºËá¥ queue ‰∏≠ÁöÑÊüê‰∫õÊ∂àÊÅØÊó†Ê≥ïË¢´Ê∂àË¥π</p>
<p><strong>Â∫îÁî®Âú∫ÊôØ:</strong></p>
<p>‰∏∫‰∫Ü‰øùËØÅËÆ¢Âçï‰∏öÂä°ÁöÑÊ∂àÊÅØÊï∞ÊçÆ‰∏ç‰∏¢Â§±ÔºåÈúÄË¶Å‰ΩøÁî®Âà∞ RabbitMQ ÁöÑÊ≠ª‰ø°ÈòüÂàóÊú∫Âà∂ÔºåÂΩìÊ∂àÊÅØ Ê∂àË¥πÂèëÁîüÂºÇÂ∏∏Êó∂ÔºåÂ∞ÜÊ∂àÊÅØÊäïÂÖ•Ê≠ª‰ø°ÈòüÂàó‰∏≠.ËøòÊúâÊØîÂ¶ÇËØ¥: Áî®Êà∑Âú®ÂïÜÂüé‰∏ãÂçïÊàêÂäüÂπ∂ÁÇπÂáªÂéªÊîØ‰ªòÂêéÂú®ÊåáÂÆöÊó∂ Èó¥Êú™ÊîØ‰ªòÊó∂Ëá™Âä®Â§±Êïà</p>
<p><strong>Ê≠ª‰ø°Ê∂àÊÅØÁöÑÊù•Ê∫ê</strong></p>
<p>Ê∂àÊÅØ TTL ËøáÊúü</p>
<p>ÈòüÂàóËææÂà∞ÊúÄÂ§ßÈïøÂ∫¶(ÈòüÂàóÊª°‰∫ÜÔºåÊó†Ê≥ïÂÜçÊ∑ªÂä†Êï∞ÊçÆÂà∞ mq ‰∏≠)</p>
<p>Ê∂àÊÅØË¢´ÊãíÁªù</p>
<p><strong>Ê≠ª‰ø°ÂÆûÊàò</strong></p>
<p><img src="/post/rabbitmq/assets/1682398773088.png"
	width="1349"
	height="635"
	srcset="/post/rabbitmq/assets/1682398773088_hu3ff6465a37095e97f5ded271b1b1f879_98351_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682398773088_hu3ff6465a37095e97f5ded271b1b1f879_98351_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682398773088"
	
	
		class="gallery-image" 
		data-flex-grow="212"
		data-flex-basis="509px"
	
></p>
<p><strong>Áîü‰∫ßËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Publisher</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.‰ΩøÁî®Â∑•ÂÖ∑Á±ªËé∑ÂèñchannelÂØπË±°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.Âèë‰ø°ÊÅØ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span><span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">20</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>            Thread<span style="color:#f92672">.</span><span style="color:#a6e22e">sleep</span><span style="color:#f92672">(</span><span style="color:#ae81ff">1000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>            channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicPublish</span><span style="color:#f92672">(</span>Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">normal_exchange_name</span><span style="color:#f92672">,</span> Consumer1<span style="color:#f92672">.</span><span style="color:#a6e22e">normal_routing_key</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">null</span><span style="color:#f92672">,</span> <span style="color:#f92672">(</span><span style="color:#e6db74">&#34;info...&#34;</span><span style="color:#f92672">+</span>i<span style="color:#f92672">).</span><span style="color:#a6e22e">getBytes</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;UTF-8&#34;</span><span style="color:#f92672">));</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>Ê∂àË¥πËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.rabbitmq.quickstart.dead_letter<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.BuiltinExchangeType<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Channel<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.DeliverCallback<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.client.Delivery<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> com.rabbitmq.quickstart.utils.RabbitUtils<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.io.IOException<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.HashMap<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> java.util.Map<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Consumer1</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String normal_exchange_name <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;normal_exchange&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String normal_queue_name <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;normal_queue&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String dead_exchange_name <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dead_exchange&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String dead_queue_name <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dead_queue&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String normal_routing_key <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;zhangsan&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String dead_routing_key <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;lisi&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span><span style="color:#f92672">(</span>String<span style="color:#f92672">[]</span> args<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> Exception <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//1.Ëé∑ÂèñChannel
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        Channel channel <span style="color:#f92672">=</span> RabbitUtils<span style="color:#f92672">.</span><span style="color:#a6e22e">getChannel</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//2.ÂàõÂª∫Ê≠£Â∏∏ÁöÑ‰∫§Êç¢Êú∫ÂíåÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>normal_exchange_name<span style="color:#f92672">,</span> BuiltinExchangeType<span style="color:#f92672">.</span><span style="color:#a6e22e">DIRECT</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * Êàë‰ª¨Ë¶ÅÂëäÁü•Ê≠£Â∏∏ÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 1.ËøáÊúüÊó∂Èó¥  ‰ªÄ‰πàÊó∂ÂÄôÈúÄË¶ÅÊää‰ø°ÊÅØÂèòÊàêÊ≠ª‰ø°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 2.Ê≠ª‰ø°Ë¶ÅÂèëÁªôÂì™‰∏™Ê≠ª‰ø°‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         * 3.ËÆæÁΩÆÂèëÈÄÅÁªôÊ≠ª‰ø°‰∫§Êç¢Êú∫Êó∂ÊåáÂÆöÁöÑrouting key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">         */</span>
</span></span><span style="display:flex;"><span>        Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> map <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;();</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-message-ttl&#34;</span><span style="color:#f92672">,</span><span style="color:#ae81ff">10000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-exchange&#34;</span><span style="color:#f92672">,</span>dead_exchange_name<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        map<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-routing-key&#34;</span><span style="color:#f92672">,</span>dead_routing_key<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>normal_queue_name<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span>map<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//3.ÂàõÂª∫Ê≠ª‰ø°‰∫§Êç¢Êú∫ÂíåÈòüÂàó
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">exchangeDeclare</span><span style="color:#f92672">(</span>dead_exchange_name<span style="color:#f92672">,</span> BuiltinExchangeType<span style="color:#f92672">.</span><span style="color:#a6e22e">DIRECT</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueDeclare</span><span style="color:#f92672">(</span>dead_queue_name<span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">false</span><span style="color:#f92672">,</span><span style="color:#66d9ef">null</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//4.ÁªëÂÆö
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>       channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>normal_queue_name<span style="color:#f92672">,</span>normal_exchange_name<span style="color:#f92672">,</span>normal_routing_key<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">queueBind</span><span style="color:#f92672">(</span>dead_queue_name<span style="color:#f92672">,</span>dead_exchange_name<span style="color:#f92672">,</span>dead_routing_key<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">//5.Ê∂àË¥πÊ≠ª‰ø°ÈòüÂàóÁöÑÊï∞ÊçÆ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>        channel<span style="color:#f92672">.</span><span style="color:#a6e22e">basicConsume</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>            dead_queue_name<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">true</span><span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">(</span>String consumerTag<span style="color:#f92672">,</span> Delivery message<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>                    System<span style="color:#f92672">.</span><span style="color:#a6e22e">out</span><span style="color:#f92672">.</span><span style="color:#a6e22e">println</span><span style="color:#f92672">(</span><span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">()));</span>
</span></span><span style="display:flex;"><span>                <span style="color:#f92672">},</span>
</span></span><span style="display:flex;"><span>            <span style="color:#f92672">(</span>consumerTag<span style="color:#f92672">)</span> <span style="color:#f92672">-&gt;</span> <span style="color:#f92672">{</span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><h3 id="42-Âª∂ËøüÈòüÂàóÊ≠£Â∏∏‰∫§Êç¢Êú∫ttlÊ®°ÊãüÂá∫Êù•ÁöÑ">4.2 Âª∂ËøüÈòüÂàó(Ê≠£Â∏∏‰∫§Êç¢Êú∫+TTLÊ®°ÊãüÂá∫Êù•ÁöÑ)</h3>
<p>Âª∂Êó∂ÈòüÂàó,ÈòüÂàóÂÜÖÈÉ®ÊòØÊúâÂ∫èÁöÑÔºåÊúÄÈáçË¶ÅÁöÑÁâπÊÄßÂ∞±‰ΩìÁé∞Âú®ÂÆÉÁöÑÂª∂Êó∂Â±ûÊÄß‰∏äÔºåÂª∂Êó∂ÈòüÂàó‰∏≠ÁöÑÂÖÉÁ¥†ÊòØÂ∏åÊúõ Âú®ÊåáÂÆöÊó∂Èó¥Âà∞‰∫Ü‰ª•ÂêéÊàñ‰πãÂâçÂèñÂá∫ÂíåÂ§ÑÁêÜÔºåÁÆÄÂçïÊù•ËØ¥ÔºåÂª∂Êó∂ÈòüÂàóÂ∞±ÊòØÁî®Êù•Â≠òÊîæÈúÄË¶ÅÊåáÂÆöÊó∂Èó¥Ë¢´Â§ÑÁêÜÁöÑÂÖÉÁ¥†ÁöÑÈòüÂàó„ÄÇ</p>
<p><strong>Âª∂ËøüÈòüÂàó‰ΩøÁî®Âú∫ÊôØ</strong></p>
<p>1.ËÆ¢ÂçïÂú®ÂçÅÂàÜÈíü‰πãÂÜÖÊú™ÊîØ‰ªòÂàôËá™Âä®ÂèñÊ∂à</p>
<p>2.Êñ∞ÂàõÂª∫ÁöÑÂ∫óÈì∫ÔºåÂ¶ÇÊûúÂú®ÂçÅÂ§©ÂÜÖÈÉΩÊ≤°Êúâ‰∏ä‰º†ËøáÂïÜÂìÅÔºåÂàôËá™Âä®ÂèëÈÄÅÊ∂àÊÅØÊèêÈÜí„ÄÇ</p>
<p>3.Áî®Êà∑Ê≥®ÂÜåÊàêÂäüÂêéÔºåÂ¶ÇÊûú‰∏âÂ§©ÂÜÖÊ≤°ÊúâÁôªÈôÜÂàôËøõË°åÁü≠‰ø°ÊèêÈÜí„ÄÇ</p>
<p>4.Áî®Êà∑ÂèëËµ∑ÈÄÄÊ¨æÔºåÂ¶ÇÊûú‰∏âÂ§©ÂÜÖÊ≤°ÊúâÂæóÂà∞Â§ÑÁêÜÂàôÈÄöÁü•Áõ∏ÂÖ≥ËøêËê•‰∫∫Âëò„ÄÇ</p>
<p>5.È¢ÑÂÆö‰ºöËÆÆÂêéÔºåÈúÄË¶ÅÂú®È¢ÑÂÆöÁöÑÊó∂Èó¥ÁÇπÂâçÂçÅÂàÜÈíüÈÄöÁü•ÂêÑ‰∏™‰∏é‰ºö‰∫∫ÂëòÂèÇÂä†‰ºöËÆÆ</p>
<p>Ëøô‰∫õÂú∫ÊôØÈÉΩÊúâ‰∏Ä‰∏™ÁâπÁÇπÔºåÈúÄË¶ÅÂú®Êüê‰∏™‰∫ã‰ª∂ÂèëÁîü‰πãÂêéÊàñËÄÖ‰πãÂâçÁöÑÊåáÂÆöÊó∂Èó¥ÁÇπÂÆåÊàêÊüê‰∏ÄÈ°π‰ªªÂä°ÔºåÂ¶ÇÔºö ÂèëÁîüËÆ¢ÂçïÁîüÊàê‰∫ã‰ª∂ÔºåÂú®ÂçÅÂàÜÈíü‰πãÂêéÊ£ÄÊü•ËØ•ËÆ¢ÂçïÊîØ‰ªòÁä∂ÊÄÅÔºåÁÑ∂ÂêéÂ∞ÜÊú™ÊîØ‰ªòÁöÑËÆ¢ÂçïËøõË°åÂÖ≥Èó≠ÔºõÁúãËµ∑Êù•‰ºº‰πé</p>
<p>‰ΩøÁî®ÂÆöÊó∂‰ªªÂä°Ôºå‰∏ÄÁõ¥ËΩÆËØ¢Êï∞ÊçÆÔºåÊØèÁßíÊü•‰∏ÄÊ¨°ÔºåÂèñÂá∫ÈúÄË¶ÅË¢´Â§ÑÁêÜÁöÑÊï∞ÊçÆÔºåÁÑ∂ÂêéÂ§ÑÁêÜ‰∏çÂ∞±ÂÆå‰∫ã‰∫ÜÂêóÔºüÂ¶ÇÊûú Êï∞ÊçÆÈáèÊØîËæÉÂ∞ëÔºåÁ°ÆÂÆûÂèØ‰ª•ËøôÊ†∑ÂÅöÔºåÊØîÂ¶ÇÔºöÂØπ‰∫é‚ÄúÂ¶ÇÊûúË¥¶Âçï‰∏ÄÂë®ÂÜÖÊú™ÊîØ‰ªòÂàôËøõË°åËá™Âä®ÁªìÁÆó‚ÄùËøôÊ†∑ÁöÑÈúÄÊ±ÇÔºå</p>
<p>Â¶ÇÊûúÂØπ‰∫éÊó∂Èó¥‰∏çÊòØ‰∏•Ê†ºÈôêÂà∂ÔºåËÄåÊòØÂÆΩÊùæÊÑè‰πâ‰∏äÁöÑ‰∏ÄÂë®ÔºåÈÇ£‰πàÊØèÂ§©Êôö‰∏äË∑ë‰∏™ÂÆöÊó∂‰ªªÂä°Ê£ÄÊü•‰∏Ä‰∏ãÊâÄÊúâÊú™ÊîØ ‰ªòÁöÑË¥¶ÂçïÔºåÁ°ÆÂÆû‰πüÊòØ‰∏Ä‰∏™ÂèØË°åÁöÑÊñπÊ°à„ÄÇ‰ΩÜÂØπ‰∫éÊï∞ÊçÆÈáèÊØîËæÉÂ§ßÔºåÂπ∂‰∏îÊó∂ÊïàÊÄßËæÉÂº∫ÁöÑÂú∫ÊôØÔºåÂ¶ÇÔºö‚ÄúËÆ¢ÂçïÂçÅ ÂàÜÈíüÂÜÖÊú™ÊîØ‰ªòÂàôÂÖ≥Èó≠‚ÄúÔºåÁü≠ÊúüÂÜÖÊú™ÊîØ‰ªòÁöÑËÆ¢ÂçïÊï∞ÊçÆÂèØËÉΩ‰ºöÊúâÂæàÂ§öÔºåÊ¥ªÂä®ÊúüÈó¥ÁîöËá≥‰ºöËææÂà∞Áôæ‰∏áÁîöËá≥ÂçÉ‰∏á Á∫ßÂà´ÔºåÂØπËøô‰πàÂ∫ûÂ§ßÁöÑÊï∞ÊçÆÈáè‰ªçÊóß‰ΩøÁî®ËΩÆËØ¢ÁöÑÊñπÂºèÊòæÁÑ∂ÊòØ‰∏çÂèØÂèñÁöÑÔºåÂæàÂèØËÉΩÂú®‰∏ÄÁßíÂÜÖÊó†Ê≥ïÂÆåÊàêÊâÄÊúâËÆ¢Âçï ÁöÑÊ£ÄÊü•ÔºåÂêåÊó∂‰ºöÁªôÊï∞ÊçÆÂ∫ìÂ∏¶Êù•ÂæàÂ§ßÂéãÂäõÔºåÊó†Ê≥ïÊª°Ë∂≥‰∏öÂä°Ë¶ÅÊ±ÇËÄå‰∏îÊÄßËÉΩ‰Ωé‰∏ã</p>
<h3 id="43-Êï¥Âêà-springboot">4.3 Êï¥Âêà springboot</h3>
<p><strong>ÂºïÂÖ•‰æùËµñ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;dependencies&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--RabbitMQ ‰æùËµñ--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-amqp<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>com.alibaba<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>fastjson<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;version&gt;</span>1.2.47<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>org.projectlombok<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>lombok<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!--RabbitMQ ÊµãËØï‰æùËµñ--&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;dependency&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;groupId&gt;</span>org.springframework.amqp<span style="color:#f92672">&lt;/groupId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;artifactId&gt;</span>spring-rabbit-test<span style="color:#f92672">&lt;/artifactId&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;scope&gt;</span>test<span style="color:#f92672">&lt;/scope&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/dependency&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/dependencies&gt;</span>
</span></span></code></pre></div><p><strong>‰øÆÊîπYaml</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#ae81ff">spring.rabbitmq.host=182.92.234.71</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">spring.rabbitmq.port=5672</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">spring.rabbitmq.username=admin</span>
</span></span><span style="display:flex;"><span><span style="color:#ae81ff">spring.rabbitmq.password=123</span>
</span></span></code></pre></div><p><strong>ÈÖçÁΩÆÁ±ª</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Configuration</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TtlQueueConfig</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String X_EXCHANGE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;X&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String QUEUE_A <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;QA&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String QUEUE_B <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;QB&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String Y_DEAD_LETTER_EXCHANGE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Y&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">final</span> String DEAD_LETTER_QUEUE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;QD&#34;</span><span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">// Â£∞Êòé xExchange
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xExchange&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> DirectExchange <span style="color:#a6e22e">xExchange</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> DirectExchange<span style="color:#f92672">(</span>X_EXCHANGE<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">// Â£∞Êòé xExchange
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;yExchange&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> DirectExchange <span style="color:#a6e22e">yExchange</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> DirectExchange<span style="color:#f92672">(</span>Y_DEAD_LETTER_EXCHANGE<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//Â£∞ÊòéÈòüÂàó A ttl ‰∏∫ 10s Âπ∂ÁªëÂÆöÂà∞ÂØπÂ∫îÁöÑÊ≠ª‰ø°‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueA&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Queue <span style="color:#a6e22e">queueA</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>     Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> args <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;(</span><span style="color:#ae81ff">3</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÂΩìÂâçÈòüÂàóÁªëÂÆöÁöÑÊ≠ª‰ø°‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-exchange&#34;</span><span style="color:#f92672">,</span> Y_DEAD_LETTER_EXCHANGE<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÂΩìÂâçÈòüÂàóÁöÑÊ≠ª‰ø°Ë∑ØÁî± key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-routing-key&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;YD&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÈòüÂàóÁöÑ TTL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-message-ttl&#34;</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">10000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#66d9ef">return</span> QueueBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">durable</span><span style="color:#f92672">(</span>QUEUE_A<span style="color:#f92672">).</span><span style="color:#a6e22e">withArguments</span><span style="color:#f92672">(</span>args<span style="color:#f92672">).</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">// Â£∞ÊòéÈòüÂàó A ÁªëÂÆö X ‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Binding <span style="color:#a6e22e">queueaBindingX</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueA&#34;</span><span style="color:#f92672">)</span> Queue queueA<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xExchange&#34;</span><span style="color:#f92672">)</span> DirectExchange xExchange<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> BindingBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span>queueA<span style="color:#f92672">).</span><span style="color:#a6e22e">to</span><span style="color:#f92672">(</span>xExchange<span style="color:#f92672">).</span><span style="color:#a6e22e">with</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;XA&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//Â£∞ÊòéÈòüÂàó B ttl ‰∏∫ 40s Âπ∂ÁªëÂÆöÂà∞ÂØπÂ∫îÁöÑÊ≠ª‰ø°‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueB&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Queue <span style="color:#a6e22e">queueB</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span>     Map<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">,</span> Object<span style="color:#f92672">&gt;</span> args <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;(</span><span style="color:#ae81ff">3</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÂΩìÂâçÈòüÂàóÁªëÂÆöÁöÑÊ≠ª‰ø°‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-exchange&#34;</span><span style="color:#f92672">,</span> Y_DEAD_LETTER_EXCHANGE<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÂΩìÂâçÈòüÂàóÁöÑÊ≠ª‰ø°Ë∑ØÁî± key
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-dead-letter-routing-key&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;YD&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>     <span style="color:#75715e">//Â£∞ÊòéÈòüÂàóÁöÑ TTL
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>     args<span style="color:#f92672">.</span><span style="color:#a6e22e">put</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;x-message-ttl&#34;</span><span style="color:#f92672">,</span> <span style="color:#ae81ff">40000</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> QueueBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">durable</span><span style="color:#f92672">(</span>QUEUE_B<span style="color:#f92672">).</span><span style="color:#a6e22e">withArguments</span><span style="color:#f92672">(</span>args<span style="color:#f92672">).</span><span style="color:#a6e22e">build</span><span style="color:#f92672">();</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//Â£∞ÊòéÈòüÂàó B ÁªëÂÆö X ‰∫§Êç¢Êú∫
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Binding <span style="color:#a6e22e">queuebBindingX</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>     <span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueB&#34;</span><span style="color:#f92672">)</span> Queue queue1B<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;xExchange&#34;</span><span style="color:#f92672">)</span> DirectExchange xExchange<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> BindingBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span>queue1B<span style="color:#f92672">).</span><span style="color:#a6e22e">to</span><span style="color:#f92672">(</span>xExchange<span style="color:#f92672">).</span><span style="color:#a6e22e">with</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;XB&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//Â£∞ÊòéÊ≠ª‰ø°ÈòüÂàó QD
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueD&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Queue <span style="color:#a6e22e">queueD</span><span style="color:#f92672">(){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Queue<span style="color:#f92672">(</span>DEAD_LETTER_QUEUE<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span> <span style="color:#75715e">//Â£∞ÊòéÊ≠ª‰ø°ÈòüÂàó QD ÁªëÂÆöÂÖ≥Á≥ª
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#a6e22e">@Bean</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">public</span> Binding <span style="color:#a6e22e">deadLetterBindingQAD</span><span style="color:#f92672">(</span>
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;queueD&#34;</span><span style="color:#f92672">)</span> Queue queueD<span style="color:#f92672">,</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#a6e22e">@Qualifier</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;yExchange&#34;</span><span style="color:#f92672">)</span> DirectExchange yExchange<span style="color:#f92672">){</span>
</span></span><span style="display:flex;"><span> 	<span style="color:#66d9ef">return</span> BindingBuilder<span style="color:#f92672">.</span><span style="color:#a6e22e">bind</span><span style="color:#f92672">(</span>queueD<span style="color:#f92672">).</span><span style="color:#a6e22e">to</span><span style="color:#f92672">(</span>yExchange<span style="color:#f92672">).</span><span style="color:#a6e22e">with</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;YD&#34;</span><span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>Áîü‰∫ßËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Slf4j</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@RequestMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ttl&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@RestController</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">SendMsgController</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Autowired</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> RabbitTemplate rabbitTemplate<span style="color:#f92672">;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@GetMapping</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;sendMsg/{message}&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">sendMsg</span><span style="color:#f92672">(</span><span style="color:#a6e22e">@PathVariable</span> String message<span style="color:#f92672">)</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂΩìÂâçÊó∂Èó¥Ôºö{},ÂèëÈÄÅ‰∏ÄÊù°‰ø°ÊÅØÁªô‰∏§‰∏™ TTL ÈòüÂàó:{}&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Date<span style="color:#f92672">(),</span> message<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        rabbitTemplate<span style="color:#f92672">.</span><span style="color:#a6e22e">convertAndSend</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;X&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;XA&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ê∂àÊÅØÊù•Ëá™ ttl ‰∏∫ 10S ÁöÑÈòüÂàó: &#34;</span> <span style="color:#f92672">+</span> message<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>        rabbitTemplate<span style="color:#f92672">.</span><span style="color:#a6e22e">convertAndSend</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;X&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;XB&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;Ê∂àÊÅØÊù•Ëá™ ttl ‰∏∫ 40S ÁöÑÈòüÂàó: &#34;</span> <span style="color:#f92672">+</span> message<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span></code></pre></div><p><strong>Ê∂àË¥πËÄÖ</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@Slf4j</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">@Component</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">DeadLetterQueueConsumer</span> <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@RabbitListener</span><span style="color:#f92672">(</span>queues <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;QD&#34;</span><span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">receiveD</span><span style="color:#f92672">(</span>Message message<span style="color:#f92672">,</span> Channel channel<span style="color:#f92672">)</span> <span style="color:#66d9ef">throws</span> IOException <span style="color:#f92672">{</span>
</span></span><span style="display:flex;"><span>        String msg <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> String<span style="color:#f92672">(</span>message<span style="color:#f92672">.</span><span style="color:#a6e22e">getBody</span><span style="color:#f92672">());</span>
</span></span><span style="display:flex;"><span>        log<span style="color:#f92672">.</span><span style="color:#a6e22e">info</span><span style="color:#f92672">(</span><span style="color:#e6db74">&#34;ÂΩìÂâçÊó∂Èó¥Ôºö{},Êî∂Âà∞Ê≠ª‰ø°ÈòüÂàó‰ø°ÊÅØ{}&#34;</span><span style="color:#f92672">,</span> <span style="color:#66d9ef">new</span> Date<span style="color:#f92672">().</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">(),</span> msg<span style="color:#f92672">);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">}</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">ÂèëËµ∑‰∏Ä‰∏™ËØ∑Ê±Ç</span> http<span style="color:#f92672">:</span><span style="color:#75715e">//localhost:8080/ttl/sendMsg/O(‚à©_‚à©)OÂìàÂìà~
</span></span></span></code></pre></div><h3 id="44-ÂπÇÁ≠âÊÄß">4.4 ÂπÇÁ≠âÊÄß</h3>
<p>Áî®Êà∑ÂØπ‰∫éÂêå‰∏ÄÊìç‰ΩúÂèëËµ∑ÁöÑ‰∏ÄÊ¨°ËØ∑Ê±ÇÊàñËÄÖÂ§öÊ¨°ËØ∑Ê±ÇÁöÑÁªìÊûúÊòØ‰∏ÄËá¥ÁöÑÔºå‰∏ç‰ºöÂõ†‰∏∫Â§öÊ¨°ÁÇπÂáªËÄå‰∫ßÁîü‰∫ÜÂâØ‰ΩúÁî®„ÄÇ</p>
<p>‰∏æ‰∏™ÊúÄÁÆÄÂçïÁöÑ‰æãÂ≠êÔºåÈÇ£Â∞±ÊòØÊîØ‰ªòÔºåÁî®Êà∑Ë¥≠‰π∞ÂïÜÂìÅÂêéÊîØ‰ªòÔºåÊîØ‰ªòÊâ£Ê¨æÊàêÂäüÔºå‰ΩÜÊòØËøîÂõûÁªìÊûúÁöÑÊó∂ÂÄôÁΩëÁªúÂºÇÂ∏∏Ôºå Ê≠§Êó∂Èí±Â∑≤ÁªèÊâ£‰∫ÜÔºåÁî®Êà∑ÂÜçÊ¨°ÁÇπÂáªÊåâÈíÆÔºåÊ≠§Êó∂‰ºöËøõË°åÁ¨¨‰∫åÊ¨°Êâ£Ê¨æÔºåËøîÂõûÁªìÊûúÊàêÂäüÔºåÁî®Êà∑Êü•ËØ¢‰ΩôÈ¢ùÂèëÁé∞Â§öÊâ£Èí± ‰∫ÜÔºåÊµÅÊ∞¥ËÆ∞ÂΩï‰πüÂèòÊàê‰∫Ü‰∏§Êù°„ÄÇÂú®‰ª•ÂâçÁöÑÂçïÂ∫îÁî®Á≥ªÁªü‰∏≠ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊääÊï∞ÊçÆÊìç‰ΩúÊîæÂÖ•‰∫ãÂä°‰∏≠Âç≥ÂèØÔºåÂèëÁîüÈîôËØØ Á´ãÂç≥ÂõûÊªöÔºå‰ΩÜÊòØÂÜçÂìçÂ∫îÂÆ¢Êà∑Á´ØÁöÑÊó∂ÂÄô‰πüÊúâÂèØËÉΩÂá∫Áé∞ÁΩëÁªú‰∏≠Êñ≠ÊàñËÄÖÂºÇÂ∏∏Á≠âÁ≠â</p>
<h4 id="441-Ê∂àÊÅØÈáçÂ§çÊ∂àË¥π">4.4.1 Ê∂àÊÅØÈáçÂ§çÊ∂àË¥π</h4>
<p>Ê∂àË¥πËÄÖÂú®Ê∂àË¥π MQ ‰∏≠ÁöÑÊ∂àÊÅØÊó∂ÔºåMQ Â∑≤ÊääÊ∂àÊÅØÂèëÈÄÅÁªôÊ∂àË¥πËÄÖÔºåÊ∂àË¥πËÄÖÂú®ÁªôMQ ËøîÂõû ack Êó∂ÁΩëÁªú‰∏≠Êñ≠Ôºå</p>
<p>ÊïÖ MQ Êú™Êî∂Âà∞Á°ÆËÆ§‰ø°ÊÅØÔºåËØ•Êù°Ê∂àÊÅØ‰ºöÈáçÊñ∞ÂèëÁªôÂÖ∂‰ªñÁöÑÊ∂àË¥πËÄÖÔºåÊàñËÄÖÂú®ÁΩëÁªúÈáçËøûÂêéÂÜçÊ¨°ÂèëÈÄÅÁªôËØ•Ê∂àË¥πËÄÖÔºå‰ΩÜÂÆûÈôÖ‰∏äËØ•Ê∂àË¥πËÄÖÂ∑≤ÊàêÂäüÊ∂àË¥π‰∫ÜËØ•Êù°Ê∂àÊÅØÔºåÈÄ†ÊàêÊ∂àË¥πËÄÖÊ∂àË¥π‰∫ÜÈáçÂ§çÁöÑÊ∂àÊÅØ„ÄÇ</p>
<h4 id="442-Ëß£ÂÜ≥ÊÄùË∑Ø">4.4.2 Ëß£ÂÜ≥ÊÄùË∑Ø</h4>
<p>MQ Ê∂àË¥πËÄÖÁöÑÂπÇÁ≠âÊÄßÁöÑËß£ÂÜ≥‰∏ÄËà¨‰ΩøÁî®ÂÖ®Â±Ä ID ÊàñËÄÖÂÜô‰∏™ÂîØ‰∏ÄÊ†áËØÜÊØîÂ¶ÇÊó∂Èó¥Êà≥ ÊàñËÄÖ UUID ÊàñËÄÖËÆ¢ÂçïÊ∂àË¥π</p>
<p>ËÄÖÊ∂àË¥π MQ ‰∏≠ÁöÑÊ∂àÊÅØ‰πüÂèØÂà©Áî® MQ ÁöÑËØ• id Êù•Âà§Êñ≠ÔºåÊàñËÄÖÂèØÊåâËá™Â∑±ÁöÑËßÑÂàôÁîüÊàê‰∏Ä‰∏™ÂÖ®Â±ÄÂîØ‰∏Ä idÔºåÊØèÊ¨°Ê∂àË¥πÊ∂à ÊÅØÊó∂Áî®ËØ• id ÂÖàÂà§Êñ≠ËØ•Ê∂àÊÅØÊòØÂê¶Â∑≤Ê∂àË¥πËøá„ÄÇ</p>
<h4 id="443-Ê∂àË¥πÁ´ØÁöÑÂπÇÁ≠âÊÄß‰øùÈöú">4.4.3 Ê∂àË¥πÁ´ØÁöÑÂπÇÁ≠âÊÄß‰øùÈöú</h4>
<p>Âú®Êµ∑ÈáèËÆ¢ÂçïÁîüÊàêÁöÑ‰∏öÂä°È´òÂ≥∞ÊúüÔºåÁîü‰∫ßÁ´ØÊúâÂèØËÉΩÂ∞±‰ºöÈáçÂ§çÂèëÁîü‰∫ÜÊ∂àÊÅØÔºåËøôÊó∂ÂÄôÊ∂àË¥πÁ´ØÂ∞±Ë¶ÅÂÆûÁé∞ÂπÇÁ≠âÊÄßÔºå</p>
<p>ËøôÂ∞±ÊÑèÂë≥ÁùÄÊàë‰ª¨ÁöÑÊ∂àÊÅØÊ∞∏Ëøú‰∏ç‰ºöË¢´Ê∂àË¥πÂ§öÊ¨°ÔºåÂç≥‰ΩøÊàë‰ª¨Êî∂Âà∞‰∫Ü‰∏ÄÊ†∑ÁöÑÊ∂àÊÅØ„ÄÇ‰∏öÁïå‰∏ªÊµÅÁöÑÂπÇÁ≠âÊÄßÊúâ‰∏§ÁßçÊìç‰Ωú:a.</p>
<p>ÂîØ‰∏Ä ID+ÊåáÁ∫πÁ†ÅÊú∫Âà∂,Âà©Áî®Êï∞ÊçÆÂ∫ì‰∏ªÈîÆÂéªÈáç, b.Âà©Áî® redis ÁöÑÂéüÂ≠êÊÄßÂéªÂÆûÁé∞</p>
<h2 id="‰∫î-rabbitmq-ÈõÜÁæ§">‰∫î RabbitMQ ÈõÜÁæ§</h2>
<h3 id="51-‰ΩøÁî®ÈõÜÁæ§ÁöÑÂéüÂõ†">5.1 ‰ΩøÁî®ÈõÜÁæ§ÁöÑÂéüÂõ†</h3>
<p>ÊúÄÂºÄÂßãÊàë‰ª¨‰ªãÁªç‰∫ÜÂ¶Ç‰ΩïÂÆâË£ÖÂèäËøêË°å RabbitMQ ÊúçÂä°Ôºå‰∏çËøáËøô‰∫õÊòØÂçïÊú∫ÁâàÁöÑÔºåÊó†Ê≥ïÊª°Ë∂≥ÁõÆÂâçÁúüÂÆûÂ∫îÁî®ÁöÑ Ë¶ÅÊ±Ç„ÄÇÂ¶ÇÊûú RabbitMQ ÊúçÂä°Âô®ÈÅáÂà∞ÂÜÖÂ≠òÂ¥©Ê∫É„ÄÅÊú∫Âô®ÊéâÁîµÊàñËÄÖ‰∏ªÊùøÊïÖÈöúÁ≠âÊÉÖÂÜµÔºåËØ•ÊÄé‰πàÂäûÔºüÂçïÂè∞ RabbitMQ</p>
<p>ÊúçÂä°Âô®ÂèØ‰ª•Êª°Ë∂≥ÊØèÁßí 1000 Êù°Ê∂àÊÅØÁöÑÂêûÂêêÈáèÔºåÈÇ£‰πàÂ¶ÇÊûúÂ∫îÁî®ÈúÄË¶Å RabbitMQ ÊúçÂä°Êª°Ë∂≥ÊØèÁßí 10 ‰∏áÊù°Ê∂àÊÅØÁöÑÂêûÂêêÈáèÂë¢ÔºüË¥≠‰π∞ÊòÇË¥µÁöÑÊúçÂä°Âô®Êù•Â¢ûÂº∫ÂçïÊú∫ RabbitMQ Âä°ÁöÑÊÄßËÉΩÊòæÂæóÊçâË•üËßÅËÇòÔºåÊê≠Âª∫‰∏Ä‰∏™ RabbitMQ ÈõÜÁæ§ÊâçÊòØ Ëß£ÂÜ≥ÂÆûÈôÖÈóÆÈ¢òÁöÑÂÖ≥ÈîÆ.</p>
<h5 id="511-ÈõÜÁæ§ÁöÑ‰∏§ÁßçÊ®°Âºè">5.1.1 ÈõÜÁæ§ÁöÑ‰∏§ÁßçÊ®°Âºè</h5>
<p>ËØ¥Âà∞ÈõÜÁæ§ÔºåÂ∞è‰ºô‰º¥‰ª¨ÂèØËÉΩÁ¨¨‰∏Ä‰∏™ÈóÆÈ¢òÊòØÔºåÂ¶ÇÊûúÊàëÊúâ‰∏Ä‰∏™ RabbitMQ ÈõÜÁæ§ÔºåÈÇ£‰πàÊòØ‰∏çÊòØÊàëÁöÑÊ∂àÊÅØÈõÜÁæ§‰∏≠ÁöÑÊØè‰∏Ä‰∏™ÂÆû‰æãÈÉΩ‰øùÂ≠ò‰∏Ä‰ªΩÂë¢Ôºü</p>
<p>ËøôÂÖ∂ÂÆûÂ∞±Ê∂âÂèäÂà∞ RabbitMQ ÈõÜÁæ§ÁöÑ‰∏§ÁßçÊ®°ÂºèÔºö</p>
<ul>
<li>
<p><strong>ÊôÆÈÄöÈõÜÁæ§</strong></p>
<p>ÊôÆÈÄöÈõÜÁæ§Ê®°ÂºèÔºåÂ∞±ÊòØÂ∞Ü RabbitMQ ÈÉ®ÁΩ≤Âà∞Â§öÂè∞ÊúçÂä°Âô®‰∏äÔºåÊØè‰∏™ÊúçÂä°Âô®ÂêØÂä®‰∏Ä‰∏™ RabbitMQ ÂÆû‰æãÔºåÂ§ö‰∏™ÂÆû‰æã‰πãÈó¥ËøõË°åÊ∂àÊÅØÈÄö‰ø°„ÄÇ</p>
<p>Ê≠§Êó∂Êàë‰ª¨ÂàõÂª∫ÁöÑÈòüÂàó QueueÔºåÂÆÉÁöÑÂÖÉÊï∞ÊçÆÔºà‰∏ªË¶ÅÂ∞±ÊòØ Queue ÁöÑ‰∏Ä‰∫õÈÖçÁΩÆ‰ø°ÊÅØÔºâ‰ºöÂú®ÊâÄÊúâÁöÑ RabbitMQ ÂÆû‰æã‰∏≠ËøõË°åÂêåÊ≠•Ôºå‰ΩÜÊòØÈòüÂàó‰∏≠ÁöÑÊ∂àÊÅØÂè™‰ºöÂ≠òÂú®‰∫é‰∏Ä‰∏™ RabbitMQ ÂÆû‰æã‰∏äÔºåËÄå‰∏ç‰ºöÂêåÊ≠•Âà∞ÂÖ∂‰ªñÈòüÂàó„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/d8cb4fc480d21184afa8285abcb2511d.png"
	width="1382"
	height="774"
	srcset="/post/rabbitmq/assets/d8cb4fc480d21184afa8285abcb2511d_hu0fad735597a74182e4a9ce677f11d2bb_91474_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/d8cb4fc480d21184afa8285abcb2511d_hu0fad735597a74182e4a9ce677f11d2bb_91474_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="178"
		data-flex-basis="428px"
	
></p>
</li>
<li>
<p><strong>ÈïúÂÉèÈõÜÁæ§</strong></p>
</li>
</ul>
<p>ÂÆÉÂíåÊôÆÈÄöÈõÜÁæ§ÊúÄÂ§ßÁöÑÂå∫Âà´Âú®‰∫é Ê∂àÊÅØÊï∞ÊçÆÂíåQueueÂéüÊï∞ÊçÆ‰∏çÂÜçÊòØÂçïÁã¨Â≠òÂÇ®Âú®‰∏ÄÂè∞Êú∫Âô®‰∏äÔºåËÄåÊòØÂêåÊó∂Â≠òÂÇ®Âú®Â§öÂè∞Êú∫Âô®‰∏ä„ÄÇ</p>
<p><img src="/post/rabbitmq/assets/640f79d7e9c47aac744e995757ae22bf.png"
	width="1622"
	height="776"
	srcset="/post/rabbitmq/assets/640f79d7e9c47aac744e995757ae22bf_hu3db573ed4ea6724b803778ec213b96b1_74208_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/640f79d7e9c47aac744e995757ae22bf_hu3db573ed4ea6724b803778ec213b96b1_74208_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="img"
	
	
		class="gallery-image" 
		data-flex-grow="209"
		data-flex-basis="501px"
	
></p>
<h3 id="52-ÊôÆÈÄöÈõÜÁæ§Êê≠Âª∫Ê≠•È™§">5.2 ÊôÆÈÄöÈõÜÁæ§Êê≠Âª∫Ê≠•È™§</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>1.‰øÆÊîπ 3 Âè∞Êú∫Âô®ÁöÑ‰∏ªÊú∫ÂêçÁß∞
</span></span><span style="display:flex;"><span>vim /etc/hostname
</span></span><span style="display:flex;"><span>2.ÈÖçÁΩÆÂêÑ‰∏™ËäÇÁÇπÁöÑ hosts Êñá‰ª∂ÔºåËÆ©ÂêÑ‰∏™ËäÇÁÇπÈÉΩËÉΩ‰∫íÁõ∏ËØÜÂà´ÂØπÊñπ
</span></span><span style="display:flex;"><span>vim /etc/hosts
</span></span><span style="display:flex;"><span>10.211.55.74 node1
</span></span><span style="display:flex;"><span>10.211.55.75 node2
</span></span><span style="display:flex;"><span>10.211.55.76 node3
</span></span><span style="display:flex;"><span>3.‰ª•Á°Æ‰øùÂêÑ‰∏™ËäÇÁÇπÁöÑ cookie Êñá‰ª∂‰ΩøÁî®ÁöÑÊòØÂêå‰∏Ä‰∏™ÂÄº
</span></span><span style="display:flex;"><span>Âú® node1 ‰∏äÊâßË°åËøúÁ®ãÊìç‰ΩúÂëΩ‰ª§
</span></span><span style="display:flex;"><span>scp /var/lib/rabbitmq/.erlang.cookie root@node2:/var/lib/rabbitmq/.erlang.cookie
</span></span><span style="display:flex;"><span>scp /var/lib/rabbitmq/.erlang.cookie root@node3:/var/lib/rabbitmq/.erlang.cookie
</span></span><span style="display:flex;"><span>================================================
</span></span><span style="display:flex;"><span>4.ÂêØÂä® RabbitMQ ÊúçÂä°,È°∫Â∏¶ÂêØÂä® Erlang ËôöÊãüÊú∫Âíå RbbitMQ Â∫îÁî®ÊúçÂä°(Âú®‰∏âÂè∞ËäÇÁÇπ‰∏äÂàÜÂà´ÊâßË°å‰ª•
</span></span><span style="display:flex;"><span>‰∏ãÂëΩ‰ª§)
</span></span><span style="display:flex;"><span>rabbitmq-server -detached
</span></span><span style="display:flex;"><span>5.Âú®ËäÇÁÇπ 2 ÊâßË°å
</span></span><span style="display:flex;"><span>rabbitmqctl stop_app
</span></span><span style="display:flex;"><span>(rabbitmqctl stop ‰ºöÂ∞ÜErlang ËôöÊãüÊú∫ÂÖ≥Èó≠Ôºårabbitmqctl stop_app Âè™ÂÖ≥Èó≠ RabbitMQ ÊúçÂä°)
</span></span><span style="display:flex;"><span>rabbitmqctl reset
</span></span><span style="display:flex;"><span>rabbitmqctl join_cluster rabbit@node1
</span></span><span style="display:flex;"><span>rabbitmqctl start_app(Âè™ÂêØÂä®Â∫îÁî®ÊúçÂä°)
</span></span><span style="display:flex;"><span>6.Âú®ËäÇÁÇπ 3 ÊâßË°å
</span></span><span style="display:flex;"><span>rabbitmqctl stop_app
</span></span><span style="display:flex;"><span>rabbitmqctl reset
</span></span><span style="display:flex;"><span>rabbitmqctl join_cluster rabbit@node2
</span></span><span style="display:flex;"><span>rabbitmqctl start_app
</span></span><span style="display:flex;"><span>7.ÈõÜÁæ§Áä∂ÊÄÅ
</span></span><span style="display:flex;"><span>rabbitmqctl cluster_status
</span></span><span style="display:flex;"><span>8.ÈúÄË¶ÅÈáçÊñ∞ËÆæÁΩÆÁî®Êà∑
</span></span><span style="display:flex;"><span>ÂàõÂª∫Ë¥¶Âè∑
</span></span><span style="display:flex;"><span>rabbitmqctl add_user admin 123
</span></span><span style="display:flex;"><span>ËÆæÁΩÆÁî®Êà∑ËßíËâ≤
</span></span><span style="display:flex;"><span>rabbitmqctl set_user_tags admin administrator
</span></span><span style="display:flex;"><span>ËÆæÁΩÆÁî®Êà∑ÊùÉÈôê
</span></span><span style="display:flex;"><span>rabbitmqctl set_permissions -p &#34;/&#34; admin &#34;.*&#34; &#34;.*&#34; &#34;.*&#34;
</span></span><span style="display:flex;"><span>9.Ëß£Èô§ÈõÜÁæ§ËäÇÁÇπ(node2 Âíå node3 Êú∫Âô®ÂàÜÂà´ÊâßË°å)
</span></span><span style="display:flex;"><span>rabbitmqctl stop_app
</span></span><span style="display:flex;"><span>rabbitmqctl reset
</span></span><span style="display:flex;"><span>rabbitmqctl start_app
</span></span><span style="display:flex;"><span>rabbitmqctl cluster_status
</span></span><span style="display:flex;"><span>rabbitmqctl forget_cluster_node rabbit@node2(node1 Êú∫Âô®‰∏äÊâßË°å)
</span></span></code></pre></div><h3 id="53-Êê≠Âª∫ÈïúÂÉèÈõÜÁæ§">5.3 Êê≠Âª∫ÈïúÂÉèÈõÜÁæ§</h3>
<p>ÊâÄË∞ìÁöÑÈïúÂÉèÈõÜÁæ§Ê®°ÂºèÂπ∂‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÊê≠Âª∫ÔºåÂè™ÈúÄË¶ÅÊàë‰ª¨Â∞ÜÈòüÂàóÈÖçÁΩÆ‰∏∫ÈïúÂÉèÈòüÂàóÂç≥ÂèØ„ÄÇ</p>
<p>ÈïúÂÉèÈòüÂàó(Mirror Queue)ÁöÑÊú∫Âà∂ÔºåÂèØ‰ª•Â∞ÜÈòüÂàó<strong>ÈïúÂÉè</strong>Âà∞ÈõÜÁæ§‰∏≠ÁöÑÂÖ∂‰ªñ Broker ËäÇÁÇπ‰πã‰∏äÔºåÂ¶ÇÊûúÈõÜÁæ§‰∏≠ ÁöÑ‰∏Ä‰∏™ËäÇÁÇπÂ§±Êïà‰∫ÜÔºåÈòüÂàóËÉΩËá™Âä®Âú∞ÂàáÊç¢Âà∞ÈïúÂÉè‰∏≠ÁöÑÂè¶‰∏Ä‰∏™ËäÇÁÇπ‰∏ä‰ª•‰øùËØÅÊúçÂä°ÁöÑÂèØÁî®ÊÄß</p>
<p><strong>Êê≠Âª∫Ê≠•È™§</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>1.ÂêØÂä®‰∏âÂè∞ÈõÜÁæ§ËäÇÁÇπ
</span></span><span style="display:flex;"><span>2.Èöè‰æøÊâæ‰∏Ä‰∏™ËäÇÁÇπÊ∑ªÂä† policy
</span></span></code></pre></div><p><img src="/post/rabbitmq/assets/1682399882754.png"
	width="1459"
	height="792"
	srcset="/post/rabbitmq/assets/1682399882754_hua8d0a897e2f6dd8f48a5797d75a0d038_251981_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682399882754_hua8d0a897e2f6dd8f48a5797d75a0d038_251981_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682399882754"
	
	
		class="gallery-image" 
		data-flex-grow="184"
		data-flex-basis="442px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>3.Âú® node1 ‰∏äÂàõÂª∫‰∏Ä‰∏™ÈòüÂàóÂèëÈÄÅ‰∏ÄÊù°Ê∂àÊÅØÔºåÈòüÂàóÂ≠òÂú®ÈïúÂÉèÈòüÂàó
</span></span></code></pre></div><p><img src="/post/rabbitmq/assets/1682399911404.png"
	width="726"
	height="516"
	srcset="/post/rabbitmq/assets/1682399911404_hu9497032c4acded63cbcc5eea8285a3fd_95665_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682399911404_hu9497032c4acded63cbcc5eea8285a3fd_95665_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682399911404"
	
	
		class="gallery-image" 
		data-flex-grow="140"
		data-flex-basis="337px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>4.ÂÅúÊéâ node1 ‰πãÂêéÂèëÁé∞ node2 Êàê‰∏∫ÈïúÂÉèÈòüÂàó
</span></span></code></pre></div><p><img src="/post/rabbitmq/assets/1682399938056.png"
	width="841"
	height="594"
	srcset="/post/rabbitmq/assets/1682399938056_hu5c6098303cf9b5af48969d06b16fc5ee_132222_480x0_resize_box_3.png 480w, /post/rabbitmq/assets/1682399938056_hu5c6098303cf9b5af48969d06b16fc5ee_132222_1024x0_resize_box_3.png 1024w"
	loading="lazy"
	
		alt="1682399938056"
	
	
		class="gallery-image" 
		data-flex-grow="141"
		data-flex-basis="339px"
	
></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>5.Â∞±ÁÆóÊï¥‰∏™ÈõÜÁæ§Âè™Ââ©‰∏ã‰∏ÄÂè∞Êú∫Âô®‰∫Ü ‰æùÁÑ∂ËÉΩÊ∂àË¥πÈòüÂàóÈáåÈù¢ÁöÑÊ∂àÊÅØ
</span></span><span style="display:flex;"><span>ËØ¥ÊòéÈòüÂàóÈáåÈù¢ÁöÑÊ∂àÊÅØË¢´ÈïúÂÉèÈòüÂàó‰º†ÈÄíÂà∞Áõ∏Â∫îÊú∫Âô®ÈáåÈù¢‰∫Ü
</span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/rabbitmq/">RabbitMQ</a>
        
            <a href="/tags/%E4%B8%AD%E9%97%B4%E4%BB%B6/">‰∏≠Èó¥‰ª∂</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.css"integrity="sha256-J&#43;iAE0sgH8QSz9hpcDxXIftnj65JEZgNhGcgReTTK9s="crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/katex.min.js"integrity="sha256-InsNdER1b2xUewP&#43;pKCUJpkhiqwHgqiPXDlIk7GzBu4="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.15.6/dist/contrib/auto-render.min.js"integrity="sha256-y39Mpg7V3D4lhBX4x6O0bUqTV4pSrfgwEfGKfxkOdgI="crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ],
            ignoredClasses: ["gist"]
        });})
</script>
    
</article>

    

    

     
    
        
    <div class="disqus-container">
    
</div>

<style>
    .disqus-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
</style>

<script>
    window.addEventListener('onColorSchemeChange', (e) => {
        if (typeof DISQUS == 'object') {
            DISQUS.reset({
                reload: true
            });
        }
    })
</script>

    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2023 Cheney Site
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.17.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js"integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z&#43;KMkF24hUW8WePSA9HM="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

<script
    src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/ribbon.min.js"
    integrity="sha384-UEK8ZiP3VgFNP8KnKMKDmd4pAUAOJ59Y2Jo3ED2Z5qKQf6HLHovMxq7Beb9CLPUe"
    crossorigin="anonymous"
    size="300"
    alpha="0.6"
    zindex="-1"
    defer
></script>

<script
    src="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/js/nprogress.min.js"
    integrity="sha384-bHDlAEUFxsRI7JfULv3DTpL2IXbbgn4JHQJibgo5iiXSK6Iu8muwqHANhun74Cqg"
    crossorigin="anonymous"
></script>
<link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/gh/zhixuan2333/gh-blog@v0.1.0/css/nprogress.css"
    integrity="sha384-KJyhr2syt5+4M9Pz5dipCvTrtvOmLk/olWVdfhAp858UCa64Ia5GFpTN7+G4BWpE"
    crossorigin="anonymous"
/>
<script>
    NProgress.start();
    document.addEventListener("readystatechange", () => {
        if (document.readyState === "interactive") NProgress.inc(0.8);
        if (document.readyState === "complete") NProgress.done();
    });
</script>
    </body>
</html>
